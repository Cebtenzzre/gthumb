2005-08-06  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/dlg-scale-image.c (h_spinbutton_value_changed)
	(w_spinbutton_value_changed): round to nearest integer when converting
	from double to int

	Fixes bug #312612: Resize bug.  Patch by whoops.

2005-08-02  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-browser-actions-entries.h: 

	Fixes bug #312374: Typo in translatable string

2005-07-30  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/dir-list.h: 
	* src/dir-list.c: 
	* src/catalog-list.c: 
	* src/catalog-list.h: 

	Underline the item name only when the mouse is over it.

2005-07-21  Pawan Chitrakar  <pawan@nplinux.org>

	* configure.in: Added ne in ALL_LINGUAS

2005-07-18  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/icons/reduce-colors-16.png: added
	* libgthumb/icons/reduce-colors-24.png: reduced

2005-07-10  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-image-selector.c (PREVIEW_SIZE): use a bigger preview.
	(gth_image_selector_get_selection): cut selection if larger than
	the pixbuf image in order to always return a valid selection range.

2005-07-12  Theppitak Karoonboonyanan  <thep@linux.thai.net>

	* configure.in: Added "th" (Thai) to ALL_LINGUAS.

2005-07-03  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* data/glade/gthumb.glade: 
	* data/glade/gthumb_comments.glade: 
	
	Fixed bug #171052: glade use more stock buttons.
	Patch by Alan Horkan.

	* src/gth-viewer.c (viewer_update_sensitivity): 
	* src/gth-browser.c (window_update_sensitivity): 

	Removed normalize contrast and stretch contrast commands.
	
	* libgthumb/typedefs.h: moved GthTransform here.
	* libgthumb/gthumb-module.c: 
	* src/dlg-jpegtran.c (dlg_apply_jpegtran_from_exif)
	(dlg_apply_jpegtran): 

	Added ability to rotate to left/right a series of images,
	or to auto-adjust the images orientation.

	* src/gth-fullscreen.c (monitor_update_metadata_cb)
	(update_current_image_link, delete_list_from_file_list)
	(monitor_update_files_cb, monitor_file_renamed_cb): 

	Update the file list and the current image when files
	are updated or deleted.

	* libgthumb/gth-pixbuf-op.h: 
	* libgthumb/gth-pixbuf-op.c: 
	* libgthumb/async-pixbuf-ops.h (_gdk_pixbuf_dither): 
	* libgthumb/async-pixbuf-ops.c (_gdk_pixbuf_dither): 
	* src/gth-viewer-ui.h: 
	* src/gth-browser-ui.h: 
	* libgthumb/async-pixbuf-ops.c (_gdk_pixbuf_dither): 
	(dither_step, shade_value, get_error_pixel): 

	Added image dithering operations using the web palette or
	black and white.  
	Removed normalize contrast and stretch contrast commands.
	
	* src/gth-browser-actions-entries.h: 
	* src/gth-browser-actions-callbacks.h: 
	* src/gth-browser-actions-callbacks.c (gth_browser_activate_action_edit_rename_file): 
	* src/gth-browser.c (window_update_sensitivity): 

	Fixed bug #171050: dont disable Rename when more than one file is 
	selected.  Patch by Christian - Manny Calavera - Neumair.
	
2005-06-28  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/dlg-jpegtran.c (notify_file_changed): update the thumbnails soon
	if images are rotated one by one.

2005-06-27  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-window-actions-callbacks.c (get_wallpaper_filename): 
	make the file hidden, starting the name with a dot.

	* src/gth-window.c (gth_window_set_image_pixbuf): clear
	the undo history after setting a new image.

	* src/dlg-change-date.c (ok_clicked): pass a path list to
	all_windows_notify_files_changed.

2005-06-25  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* data/glade/gthumb_camera.glade:

	Do not allow non local destinations.

	* src/gth-fullscreen.c (escape_filename): 
	* src/gth-exif-data-viewer.c (update_file_info): 
	* src/gth-browser.c (window_update_infobar): 
	* src/gth-browser-actions-callbacks.c (rename_file): 
	* src/dlg-web-exporter.c (add_theme_dir): 
	* src/dlg-search.c (add_file_list): 
	* src/dlg-rename-series.c (update_list): 
	* src/dlg-photo-importer.c (get_mime_type_from_filename): 
	* src/dlg-jpegtran.c (apply_transformation): 
	* src/dlg-image-prop.c (update_general_info): 
	* src/dlg-file-utils.c (dlg_check_folder): 
	* src/dlg-duplicates.c (images_selection_changed_cb): 
	* src/dlg-convert.c (load_current_image): 
	* src/dir-list.c (dir_list_update_view): 
	* src/catalog-png-exporter.c (set_item_caption): 
	* src/catalog-list.c (catalog_list_refresh): 
	* src/auto-completion.c (auto_compl_show_alternatives): 
	* libgthumb/gtk-utils.c (_gtk_entry_set_filename_text): 
	* libgthumb/dlg-save-image.c (__save_image): 
	* libgthumb/catalog.c (delete_catalog_dir): 

	Use g_filename_display_name/basename instead of g_filename_to_utf8.
	
2005-06-23  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-browser-actions-entries.h: 
	* src/gth-window-actions-entries.h: 

	Added Tools_ChangeData to the viewer window too.

	* src/gth-window.c: 
	* src/gth-window.h: 
	* src/gth-viewer.c: 
	* src/gth-viewer-ui.h: 
	* src/gth-browser-ui.h: 
	* src/gth-browser-actions-callbacks.c:
	* src/gth-window-actions-callbacks.h:
	* src/dlg-scale-image.c: 
	* src/dlg-posterize.c: 
	* src/dlg-hue-saturation.c: 
	* src/dlg-crop.c: 
	* src/dlg-color-balance.c: 
	* src/dlg-brightness-contrast.c: 

	Added undo/redo support.
	
2005-06-21  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/catalog-web-exporter.c: (save_resized_image_cb)
	(copy_exif_from_orig): new function
	(save_thumbnail_cb, save_image_preview_cb): 

	Re-add the exif data to the resized images.

	Fixes bug #303544.  Patch by Emmanuel Touzery.

2005-06-18  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-viewer.c (gth_viewer_construct): listen to the following 
	monitor events: update_files, update_metadata, file_renamed.
	(monitor_update_files_cb): close the window if the image is deleted,
	reload the image if the file is changed.

	* src/gth-browser.c (gth_browser_update_current_image_metadata): update
	the poperties dialog too.

	* src/gth-window-actions-callbacks.c (gth_window_activate_action_edit_delete_comment): removed commented out code.

2005-06-17  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-viewer-ui.h: removed comment and categories from
	the toolbar.

	* src/gth-fullscreen.c (gth_fullscreen_construct): 

	Load the previous image on middle button click.

	* src/gth-window-actions-callbacks.c: removed unused function 
	gth_window_activate_action_view_show_info
	
	* src/gth-browser.c: cleaned up; added static keyword to
	static functions.

2005-06-15  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-window-actions-callbacks.c (gth_window_activate_action_file_print): 
	* src/gth-window-actions-callbacks.c (print_done_cb): 
	* src/catalog-web-exporter.c (get_temp_dir_name): removed from here.
	* libgthumb/print-callbacks.c (print_catalog_dlg_full): new function

	Added ability to print a non-saved image.
	
	* src/gth-window-actions-callbacks.c (set_wallpaper_from_window): 

	Added ability to set as wallpaper a non-saved image.

	* data/gthumb.schemas.in: 
	* libgthumb/preferences.h (PREF_CHOOSE_DESTINATION_VIEW): 
	* src/dlg-file-utils.c (file_copy_ask__continue)
	(file_move_ask__continue): 
	* src/gth-folder-selection-dialog.c (gth_folder_selection_construct): 

	Added a "View destination" option in the choose folder dialog.

	* libgthumb/file-utils.c (get_temp_file_name, get_temp_dir_name): 
	new functions.


2005-06-13  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-fullscreen.c (get_prev_image, get_next_image): 
	consider the direction to compute the next/prev element.

2005-06-12  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/main.h:
	* src/main.c: added session support.

	* src/gth-window.h: 
	* src/gth-window.c: added  gth_window_get_window_list

	* src/gth-monitor.h: 
	* src/gth-monitor.c: added the file system monitor.

	* src/gth-browser.h: removed unused functions.

	* src/gth-browser.c (gth_browser_notify_files_changed): 
	reimplemented.
	(monitor_reload_catalogs_cb): 
	(gth_browser_notify_update_directory): 
	(gth_browser_construct): 
	(gth_browser_add_monitor): 
	(gth_browser_add_monitor): implemented functions.

	* src/gth-window-actions-callbacks.c (gth_window_activate_action_edit_delete_comment): 
	* src/dlg-comment.c (save_clicked_cb): 
	renamed all_windows_notify_update_comment as
	all_windows_notify_update_metadata.

	* src/gth-window-utils.c: 
	* src/gth-window-utils.h: 
	* libgthumb/gstringlist.c: 
	* libgthumb/gstringlist.h: 
	New files

	* src/gth-fullscreen.c (delete_current_image): 
	remove the image from the catalog if the fullscreen started from a 
	catalog view.
	(gth_fullscreen_set_catalog): function used to set the catalog.

	* src/gth-monitor.c:
	* src/gth-monitor.h:
	* src/main.c: 
	* src/gth-browser.h: 
	* src/gth-browser.c: 
	* src/gth-browser-actions-callbacks.c: 
	* src/dlg-catalog.c:
	* src/dlg-bookmarks.c: 
	* src/Makefile.am (gthumb_SOURCES): 
	Use a monitor object to notify file, directory and catalog changes.
	
	* libgthumb/typedefs.h: added GthMonitorEvent type.

	* libgthumb/gthumb-marshal.list: added new marshallers.

2005-06-11  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-fullscreen.c (create_toolbar_window): removed the frame.

2005-06-09  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-viewer.c (image_loaded_cb): support for starting
	in fullscreen mode.

	* src/gth-window-actions-callbacks.c: 
	* src/main.h: removed the fullscreen.h include.

	* src/fullscreen.c:
	* src/fullscreen.h: removed files.

	* src/gth-fullscreen.c (_show_cursor__hide_comment): 
	automatically pause the slideshow when editing the comment
	or the categories.
	(update_sensitivity): update commands sensitivity.

	* src/gth-browser.c: 
	(_set_fullscreen_or_slideshow): use only the selection if
	more than one image is selected.

	* src/gth-viewer.c: 
	* src/gth-window.c: removed the delete_image virtual function.

	* libgthumb/gth-file-list.h:
	* libgthumb/gth-file-list.c (gth_file_list_get_all_from_view): new 
	function.

	* data/glade/gthumb_preferences.glade: 
	* libgthumb/preferences.h: 
	* src/dlg-preferences.c: removed the fullscreen option for
	the slideshow, because now the slideshow is always in fullscreen
	mode.

	* src/gth-fullscreen.c: implemented the slideshow mode.

2005-06-07  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-fullscreen.c (gth_fullscreen_construct): added keyboard
	accellerators.

	* src/gth-window-actions-entries.h: 
	* src/gth-browser-ui.h: 
	* src/gth-viewer-ui.h: 

	Fixed bug #302753: Gthumb does not support HIG zooming shortcuts.
	Patch by Jaap A. Haitsma
	
2005-06-05  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-fullscreen.c (create_toolbar_window): set border width to 0.

	* src/gth-toggle-button.c:
	* src/gth-toggle-button.h:
	* src/gtkorientationbox.c:
	* src/gtkorientationbox.h: removed unused files.
	
	* src/gth-fullscreen.h: 
	* src/gth-fullscreen.c: started a new fullscreen implementation.

	* libgthumb/image-viewer.c (image_viewer_set_pixbuf): update the is_void
	flag.

	* libgthumb/file-utils.c (resolve_all_symlinks): add NULL as last param
	to g_strconcat (bug #306514).

2005-06-05  Ignacio Casal Quinteiro <icq@cvs.gnome.org>

	*configure.in: Added 'gl' to ALL_LINGUAS

2005-06-02  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-window.c: 
	* src/gth-window-actions-callbacks.c (gth_window_activate_action_file_save_as): 
	* src/gth-viewer.c (viewer_update_sensitivity): 
	* src/gth-viewer-ui.h: 
	* libgthumb/dlg-save-image.c (__save_image, dlg_save_image): 

	Implemented the File_Save action.
	
	* data/Makefile.am (applications_DATA): remove gthumb-logo.png

	* src/gth-viewer.c (gth_viewer_construct): use BUTTON2 for the DnD, 
	button 1 is used to scroll the image.
	
	* src/gth-viewer.c: added dnd support.
	(viewer_update_sensitivity): implemented.
	(viewer_key_press_cb): added keyboard shortcuts.
	(gth_viewer_load): ask whether to save the modified image before
	loading a new image.

	* src/gth-viewer-ui.h: added show/hide image comment.

	* src/gth-viewer-actions-entries.h: added reload action.

	* src/gth-viewer-actions-callbacks.c: implemented
	gth_viewer_activate_action_view_show_info

	* src/gth-browser.c (get_file_list_from_url_list): 
	* libgthumb/glib-utils.h (get_file_list_from_url_list): 
	* libgthumb/glib-utils.c (get_file_list_from_url_list): 
	moved get_file_list_from_url_list to glib-utils.c.

2005-06-01  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-viewer.c (gth_viewer_show): use idle_add instead on 
	timeout_add for calling the first_time_idle function.  Give the focus 
	to the viewer.

2005-05-30  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/main.c (open_browser_window): 
	(open_viewer_window): use "" instead of NULL.

	* src/gth-application.c (impl_gth_application_open_viewer)
	(impl_gth_application_open_browser): translate "" back to NULL.

2005-05-29  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* data/Makefile.am ($(server_in_files): use TAB instead of 8 spaces.
	* src/gth-viewer-actions-callbacks.c: include gconf-utils.h

	* src/main.c: 
	* src/gth-application.c:
	* src/gth-application.h:
	* src/Makefile.am:
	* data/Makefile.am:
	* components/image-viewer/Makefile.am: 
	* components/catalog-view/Makefile.am: 
	* configure.in:

	Added a window factory to use only one executable.
	
	* src/gth-window-actions-entries.h
	* src/gth-window-actions-callbacks.h:
	* src/gth-window-actions-callbacks.c:

	Moved common actions to gth-window-actions-callbacks.c

	* src/gth-browser.c: 
	* src/gth-browser-ui.h: 
	* src/gth-browser-actions-entries.h: 

	Implemented the history list both in the Go menu and for the toolbar
	back button.
	
	* src/gth-viewer.c: 
	* src/gth-viewer-ui.h: 
	* src/gth-viewer-actions-entries.h: 
	* src/gth-viewer-actions-callbacks.c: 
	* src/gth-viewer-actions-callbacks.h: 

	Implemented more missing actions.

	* src/dlg-png-exporter.c (dlg_exporter): use get_file_list_selection
	instead of get_file_list_selection_as_fd.

	* po/POTFILES.in: updated.

	* src/e-combo-button.c:
	* src/e-combo-button.h: removed, not used anymore.
	
2005-05-25  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-window-actions-callbacks.h:
	* src/gth-window-actions-callbacks.c: 
	* src/gth-viewer.c: 
	* src/gth-viewer-actions-callbacks.c: 
	* src/gth-browser.c:
	* src/gth-browser-ui.h: 
	* src/gth-browser-actions-entries.h: 
	* src/gth-browser-actions-callbacks.c:
	* src/gth-browser-actions-callbacks.h: 
	Implemented many functions; moved some function to 
	gth-window-action-callbacks.c

	* many_files: Code reorganization.  Removed gthumb-window.[ch]; created
	a base window class in gth-window.c;  moved the browser window in
	gth-browser.c; Added a viewer window in gth-viewer.c

2005-04-14  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/print-callbacks.c (IMAGE_SPACE): set to 20 pixels.

2005-04-12  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/gth-file-view-thumbs.c (create_unknown_pixbuf): use
	the default dir icon if the theme icon cannot be loaded.

	* libgthumb/gth-file-view-list.c (create_unknown_pixbuf): use g_free
	instead of g_object_unref.

	* src/dlg-search.c (search_clicked_cb): use get_filename instead of
	get_uri.

	* components/image-viewer/ui.c: 
	* components/image-viewer/ui.h: 
	* components/image-viewer/viewer-control.c: 
	* components/image-viewer/GNOME_GThumb_Viewer.xml.in: 

	Removed the print command from the viewer component.
	
	* data/glade/gthumb_print.glade: 
	* libgthumb/print-callbacks.c: 
	* libgthumb/preferences.h: 

	Added ability to customize the paper margins in the print
	dialog.
	
	* src/dlg-web-exporter.c: use the gtk_filechooser_button widget.

2005-04-10  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* data/glade/gthumb_png_exporter.glade: 
	* src/dlg-png-exporter.c: 

	Use the gtk_color_button instead of the gnome_color_picker widget.
	Use the gtk_font_button instead of the gnome_font_picker widget.

	* src/dlg-search.c: 
	* src/dlg-preferences.c: 

	Use the the gtk_filechooser_button widget.

	* src/actions.c (activate_action_help_about): 

	Use the gtk_about_dialog widget.

	* configure.in: require gtk+ >= 2.6.0 and glib >= 2.6.0

	* src/dlg-preferences.c: 
	* src/dlg-rename-series.c: 
	* src/dlg-search.c: 
	* src/dlg-web-exporter.c: 
	* src/dlg-write-to-cd.c: 
	* src/gth-exif-data-viewer.c: 
	* src/gth-folder-selection-dialog.c: 
	* src/gthumb-window.c: 
	* src/dlg-photo-importer.c: 
	* libgthumb/gth-file-view-list.c: 
	* libgthumb/gthumb-init.c: 
	* libgthumb/jpeg-utils.c: 
	* libgthumb/preferences.c: 
	* libgthumb/thumb-loader.c: 
	* libgthumb/gtk-utils.c: 
	* libgthumb/print-callbacks.c: 
	* libgthumb/thumb-cache.c: 
	* libgthumb/image-viewer.c: 
	* libgthumb/file-utils.c: 
	* libgthumb/gconf-utils.c: 
	* libgthumb/dlg-save-image.c: 
	* libgthumb/comments.c: 
	* libgthumb/catalog.c: 

	Include <glib/gi18n.h> instead of <libgnome/libgnome.h>
	
2005-03-31  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/dlg-photo-importer.c (main_dialog_set_sensitive): set all
	commands insensitive when importing photos.

2005-04-01  Steve Murphy  <murf@e-tools.com>

        * configure.in: Added "rw" to ALL_LINGUAS.

2005-03-23  Adi Attar  <aattar@cvs.gnome.org>

	* configure.in: Added 'xh' to ALL_LINGUAS.

2005-03-21  Rajesh Ranjan  <rranjan@redhat.com>

	* configure.in: Added "hi" to ALL_LINGUAS.

2005-03-18  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gthumb-window.c (image_comment_button_press_cb): make
	the comment text selectable.
	(key_press_cb): handle  key press events if the location entry returns
	FALSE.
	(window_hide_sidebar): do not hide the sidebar if no image is
	available.

2005-03-15  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-exif-utils.c (get_exif_time): do not assume a correct data 
	format.

	Fixes bug #170391: Crash if the EXIF DateTime is too short.

2005-03-14  Abel Cheung  <maddog@linuxhall.org>

	* configure.in: Added "tr" to ALL_LINGUAS.

2005-03-10  Paolo Bacchilega  <paobac@cvs.gnome.org>

	[ gthumb 2.6.4 released ]  

2005-03-02  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-exif-utils.c (get_exif_tag): check that data pointer != NULL

	Fixes bug #168938: Crash when loading a photo.
	
2005-02-27  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* data/albumthemes/*/style.css: justify comments.

	* libgthumb/comments.c (_g_escape_text_for_html): new function

	* src/catalog-web-exporter.c (gth_parsed_doc_print): 

	escape xml special characters.  Patch by Christophe Bisière

	* libgthumb/comments.c (comments_get_comment_as_xml_string): new
	function.

	* data/albumthemes/*/*.gthtml: Added summary  to tables.
	Patch by Christophe Bisière.
	
2005-02-26  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* data/albumthemes/BlueStripes/image.gthtml:
	* data/albumthemes/BlueStripes/index.gthtml:
	* data/albumthemes/BlueStripes/layout.css:
	* data/albumthemes/BlueStripes/Makefile.am:
	* data/albumthemes/BlueStripes/style.css:
	* data/albumthemes/BlueStripes/thumbnail.gthtml:
	* data/albumthemes/Classic/layout.css:
	* data/albumthemes/Classic/style.css:
	* data/albumthemes/Classic/thumbnail.gthtml:
	* data/albumthemes/ClassicClips/layout.css:
	* data/albumthemes/ClassicClips/style.css:
	* data/albumthemes/ClassicClips/thumbnail.gthtml:
	* data/albumthemes/Clean/image.gthtml:
	* data/albumthemes/Clean/index.gthtml:
	* data/albumthemes/Clean/layout.css:
	* data/albumthemes/Clean/Makefile.am:
	* data/albumthemes/Clean/style.css:
	* data/albumthemes/Clean/thumbnail.gthtml:
	* data/albumthemes/NeatRound/image.gthtml:
	* data/albumthemes/NeatRound/index.gthtml:
	* data/albumthemes/NeatRound/layout.css:
	* data/albumthemes/NeatRound/Makefile.am:
	* data/albumthemes/NeatRound/style.css:
	* data/albumthemes/NeatRound/thumbnail.gthtml:
	* data/albumthemes/NeatSquare/image.gthtml:
	* data/albumthemes/NeatSquare/index.gthtml:
	* data/albumthemes/NeatSquare/layout.css:
	* data/albumthemes/NeatSquare/Makefile.am:
	* data/albumthemes/NeatSquare/style.css:
	* data/albumthemes/NeatSquare/thumbnail.gthtml:

	Fixes bug #145325: xhtml/xml support for Web Albums
	Patch by Christophe Bisière.


2005-02-16  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-exif-data-viewer.c (update_exif_data): declare value as 
	const.

	Fixes bug #167502: crash trying to open specific image.

2005-02-15  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-exif-data-viewer.c (update_exif_data): ensure g_locale_to_utf8
	gets a non NULL string.

2005-02-13  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gthumb-window.c (window_notify_files_changed): restore commented 
	out code.

	Fixes bug #165478: Rotated images no longer auto-refresh in image 
	viewer.

2005-02-06  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/dlg-photo-importer.c (get_file_list, ok_clicked_cb): do not use 
	context here, check return value only.

	* libgthumb/file-utils.c (get_filename_extension): new function.

	* src/dlg-photo-importer.c (valid_mime_type): check filename if
	mime type fails.

	Attempt to fix bug #160232: gthumb doesn't import pictures from 
	ARGUS DC1500 camera.
	
2005-02-01  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/thumb-loader.c:

	Fixes bug #152441: fuzzy thumbnails, not sharp thumbnails.
	Patch by Robert Schultz.

2005-01-31  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/catalog-web-exporter.c (get_current_language): use strlen
	instead of the non-standard strnlen.

2005-01-26  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/dlg-web-exporter.c (export): unescape destination.

	Fixes bug #164961: Browsing for Web Album location adds %20 to names 
	with spaces.

	* src/dlg-photo-importer.c (notify_cb): notify images creation in an 
	idle callback.

2005-01-24  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* configure.in: changed AC_PROG_LIBTOOL to AM_PROG_LIBTOOL as suggested 
	by David Moore.

2005-01-25  Nikos Charonitakis  <charosn@her.forthnet.gr>
	
	* configure.in: Added 'el' (Greek) to ALL_LINGUAS.

2005-01-22  Paolo Bacchilega  <paobac@cvs.gnome.org>

	[ gthumb 2.6.3 released ]  

2005-01-19  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/dlg-photo-importer.c (ok_clicked_cb): check write permissions
	and free space before exporting.

	Fixes bug #164325: "Import Photos" error handling when import 
	destination is read-only or device if full.

2005-01-18  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/fullscreen.c: hide the prev and next buttons if in slideshow
	mode.

	* data/albumthemes/ClassicClips/Makefile.am (theme_DATA): added css
	files.

	* data/gthumb.schemas.in:
	* libgthumb/file-utils.c:
	* libgthumb/preferences.h:
	* src/dir-list.c:
	* src/dlg-catalog.c (new_catalog_cb): automatically select the new
	catalog.
	(dlg_add_to_catalog, add_to_catalog__ok_cb): save the last used catalog
	and auto select it when the dialog is created.

	Fixes bug #149707: Remember last catalog for next catalog operation

	* src/dir-list.c (dir_list_refresh_continue): select row.

	Fixes bug #143161: Select previous directory in directory list.
	Patch by Jason Tackaberry.

2005-01-17  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-exif-utils.c (get_exif_time): set isdst to -1

	Fixes bug #164344: EXIF hour off by one (DST)
	Fixes bug #164293: bad time in rename functionnality

2005-01-15  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* doc/C/gthumb-C.omf: set category to GNOME|Applications|Graphics

2005-01-12  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gthumb-window.c (close__step6): 

	Fixed bug #143102: gThumb SHOULD save sizes when window is maximized.

2005-01-11  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gthumb-window.c (content_radio_action, window_new)
	(set_action_important): 

	Fixed bug #160003: gthumb toolbar horizontal icons + text only shows 
	icons.

	* src/dlg-photo-importer.c (check_thread, set_camera_model): 

	Fixed bug #162323: Doesn't remember settings for serial port cameras.

	* src/catalog-web-exporter.c (line_is_void): added const

	* src/dlg-photo-importer.c (main_dialog_set_sensitive)
	(async_operation_step, async_operation_start): 

	Fixed bug #162852: pressing the camera icon while importing photos does
	bad things

	* src/dlg-rename-series.c (get_image_date): 

	Fixed bug #163417: Filename in Rename Series (date %d) contains ":" 
	which is invalid filename under Windows

2005-01-08  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/actions.c (activate_action_help_about): 
	* data/gthumb-logo.png: new file

	Added gthumb logo to the about dialog.  Logo by Cristian Correa.

2005-01-06  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/ui.h: 
	* src/gthumb-window.c (key_press_cb): removed GDK_f and GDK_s commands.

	Fixes bug #156677:  - ctrl+S should be the save shortcut, not the 
	Slide Show
	
2005-01-02  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* data/albumthemes/ClassicClips/*: updated to generate valid xhtml
	files.

2004-12-31  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* data/albumthemes/Classic/thumbnail.gthtml: 
	* data/albumthemes/Classic/style.css: 
	* data/albumthemes/Classic/Makefile.am: 
	* data/albumthemes/Classic/layout.css: 
	* data/albumthemes/Classic/index.gthtml: 
	* data/albumthemes/Classic/image.gthtml: Applied patch #35273 
	
	* src/catalog-web-exporter.c: 
	* src/albumtheme.y: 
	* src/albumtheme-private.h: 
	* src/albumtheme.l: Applied patch #35272 

	Started fixing bug #145325: xhtml/xml support for Web Albums.
	
2004-12-27  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gthumb-window.c: use "text/uri-list" only as dnd target type.

2004-12-23  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/file-utils.c (file_is_image): simplify the function to get
	the mime type from the filename.

2004-12-20  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* data/glade/gthumb_comments.glade: 

	Fixed bug #142897: Selected Categories area of Categories window 
	appears to be directly editable, but it is not.

	* libgthumb/dlg-save-image.c (file_save_ok_cb): 

	Fixes bug #149883: Saving pictures with files extensions in uppercase 
	doesn't work.

	* src/dlg-catalog.c (add_to_catalog__activated_cb): change to library 
	only if a library was activated.

	* libgthumb/catalog.c (catalog_add_item): 

	Fixes bug #156870: Duplicates allowed in catalogues.

	* libgthumb/image-viewer.c (image_loaded): reset the scrollbar offsets 
	after loading an image.

	Fixes bug #161635: Scrollbar doesn't reset when viewing with next and 
	previous.

2004-12-06  Paolo Bacchilega  <paobac@cvs.gnome.org>

	[ gthumb 2.6.2 released ]  

	* src/catalog-web-exporter.c (gth_parsed_doc_print): added classes
	to tr and td tags.

2004-11-28  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/file-utils.c (resolve_all_symlinks): 

	Fixes bug #159661: Symlinks in the root directory are incorrectly 
	resolved.

	* libgthumb/print-callbacks.c (log2): 

	Fixes bug #159672: log2() function already defined under cygwin.

2004-11-26  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/file-utils.c (image_is_gif): new function.

	* libgthumb/image-loader.c (load_image_thread): 
	* libgthumb/thumb-loader.c (thumb_loader): 

	Load the image as an animation only if the image type is gif.

	* libgthumb/jpeg-utils.c (do_load_internal): 

	Fix loading of jpegs with 4 channels.  Bug #159492.

2004-11-20  Paolo Bacchilega  <paobac@cvs.gnome.org>

	[ gthumb 2.6.1 released ] 

2004-11-19  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gthumb-window.c (ask_whether_to_save__image_saved_cb): always 
	save the exif data.

	Fixed bug #158682: Modified image auto-saved through confirmation 
	dialog loses EXIF data.

2004-11-16  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/dlg-photo-importer.c (cancel_clicked_cb): interrupt the current 
	operation instead if destroying the dialog (bug #158174).

	* libgthumb/file-utils.c (file_is_image): 
	* libgthumb/gtk-utils.c (_gtk_label_set_filename_text)
	(_gtk_entry_set_filename_text):  

	Check invalid filenames (bug #158253).

2004-11-09  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/dlg-duplicates.c (duplicates_add_columns): allow column resizing

	Fixes bug #157761: cannot resize the columns in the "find duplicates" 
	dialog of gthumb.

2004-11-08  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gthumb-preloader.c (loader_error_cb, loader_done_cb): 
	start next image load after an idle time.

	* src/gthumb-window.c (window_show_prev_image): skip broken
	images when in fullscreen mode.

	* libgthumb/gth-image-list.c (gth_image_list_realize): use 
	pango_font_metrics_get_approximate_digit_width instead of 
	pango_font_metrics_get_approximate_char_width.

	* src/ui.h: associate F12 to the Revert action.

	Fixes bug #152542: Revert F12

2004-11-06  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gthumb-window.c (window_update_sensitivity): 

	make View_ShowImage and View_Fullscreen active even when a
	broken image is selected.

2004-11-04  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gthumb-window.h: 
	* src/gthumb-window.c (window_update_statusbar_zoom_info): 
	* src/dlg-image-prop.c (update_buttons_sensitivity): 

	Fixed handling of unloadable images (for example: xcf images)
	
	* libgthumb/image-loader.c (load_image_thread): added a static lock
	around gdk_pixbuf_animation_new_from_file.

2004-10-31  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/dlg-photo-importer.c (dlg_photo_importer): 
	* data/glade/gthumb_camera.glade: 

	Fixed bug #156933: Patch to enable resizing of Import Photos dialog
	Patch by Tim Gerla

2004-10-30  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/thumb-loader.c (thumb_loader_get_type): 
	* libgthumb/image-viewer.c (image_viewer_get_type): 
	* libgthumb/image-loader.c (image_loader_get_type): 
	* libgthumb/gth-pixbuf-op.c (gth_pixbuf_op_get_type): 
	* libgthumb/gth-image-list.c (gth_image_list_get_type): 
	* libgthumb/gth-file-view-thumbs.c (gth_file_view_thumbs_get_type): 
	* libgthumb/gth-file-view-list.c (gth_file_view_list_get_type): 
	* libgthumb/gth-file-view.c (gth_file_view_get_type): 
	* libgthumb/gth-file-list.c (gth_file_list_get_type): 

	s/guint/GType/  Patch by Dave Malcolm (bug #156851)
	
2004-10-29  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/catalog-png-exporter.c:
	* src/catalog-web-exporter.c:
	* src/e-combo-button.c:
	* src/gth-exif-data-viewer.c
	* src/gth-folder-selection-dialog.c 
	* src/gth-image-selector.c
	* src/gth-toggle-button.c 
	* src/gthumb-preloader.c

	s/guint/GType/  Patch by Dave Malcolm (bug #156851)

2004-10-28  Alexander Shopov  <ash@contact.bg>

	* configure.in (ALL_LINGUAS): Added "bg" (Bulgarian)

2004-10-28  Åsmund Skjæveland  <aasmunds@fys.uio.no>

	* configure.in: Added nn to ALL_LINGUAS.
	* po/nn.po: Started Norwegian Nynorsk translation.

2004-10-21  Paolo Bacchilega  <paobac@cvs.gnome.org>

	[ gthumb 2.6.0.1 released ] 

2004-10-20  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/file-utils.h (check_permissions): 
	* libgthumb/file-utils.c (check_permissions): fix this function.

2004-10-18  Paolo Bacchilega  <paobac@cvs.gnome.org>

	[ gthumb 2.6.0 released ]

2004-10-17  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/dlg-file-utils.c (dlg_check_folder): 
	* src/dlg-jpegtran.c (apply_transformation): 
	* libgthumb/dlg-save-image.c (file_save_ok_cb): use check_permissions
	instead of access

2004-10-13  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* configure.in: check libraries version.

2004-10-11  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/ui.h: 
	* src/gthumb-window.c: queue a resize after merging the ui.

2004-09-28  Paolo Bacchilega  <paobac@cvs.gnome.org>

	[ gthumb 2.5.2 released ]

	* doc/C/gthumb.xml: updated.

2004-09-27  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* data/glade/gthumb_tools.glade: 
	* libgthumb/gtk-utils.c (exec_command): 
	* src/dlg-write-to-cd.c (write_to_cd__continue, ok_clicked_cb): 
	* src/dlg-open-with.c (open_cb): 

	Allow to burn the current catalog.
	
2004-09-19  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/image-loader.c (image_loader_set_pixbuf): get the private 
	pointer before using it.

	* libgthumb/image-viewer.c (image_viewer_expose): fix image display and
	scrolling when the frame border is 0.

2004-09-17  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/preferences.c (pref_util_restore_window_geometry): 

	Do not restore the position, let the WM place the dialog where it
	likes.
	
	* src/dlg-comment.c (dlg_comment_new): 
	* src/dlg-categories.c (dlg_categories_common): 
	* libgthumb/preferences.h: 
	* libgthumb/preferences.c (pref_util_restore_window_geometry) 
	(pref_util_save_window_geometry):

	Save the geometry of the comment and categories dialogs.
	
2004-09-11  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/fullscreen.c (fullscreen_start): 
	* libgthumb/image-viewer.c (image_viewer_show_frame) 
	(image_viewer_hide_frame, image_viewer_is_frame_visible): new 
	functions.
	* libgthumb/image-viewer.h (struct _ImageViewer): 

	fixes bug #134671: `Zoom to Fit' needlessly scales down image

	* libgthumb/gth-image-list.c (gth_image_list_set_no_image_text): 
	* libgthumb/gth-file-view-thumbs.c (gfv_set_no_image_text): 
	* libgthumb/gth-file-view.c (gfv_set_no_image_text): 
	* libgthumb/gth-file-list.c (gth_file_list_set_list) 
	(add_list_in_chunks, add_list_in_chunks): 

	make the 'no image' text configurable.

2004-09-07  Ankit Patel <ankit@redhat.com>

	* configure.in: Added "gu" (Gujarati) to ALL_LINGUAS.

2004-09-06  Tomasz KÅoczko <kloczek@pld.org.pl>

	* components/image-viewer/Makefile.am: fixed paralel build ("make -j<N>").

2004-09-05  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/gth-image-list.c: display 'No Image' when there is
	no image in the list.

	* data/albumthemes/text.h (text): removed 'click on the image...'
	message.

	* libgthumb/image-loader.c (image_loader_set_pixbuf): lock
	before setting the pixbuf, unlock when done.

2004-09-02  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* data/albumthemes/ClassicClips/image.gthtml: 
	* data/albumthemes/Clean/image.gthtml: 
	* data/albumthemes/NeatRound/image.gthtml: 
	* data/albumthemes/NeatSquare/image.gthtml: 
	* data/albumthemes/Classic/image.gthtml: removed the "click on
	image to enlarge" message.
	
	
2004-09-02  Paolo Bacchilega  <paobac@cvs.gnome.org>
	
	[ gthumb 2.5.1 released ]

2004-09-01  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* configure.in: updated required libraries versions. 

	* src/fullscreen.c (create_popup_window): use stock icons for 
	previous and next image buttons.

2004-08-31  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/dlg-web-exporter.c (wa_destination_button_clicked_cb): 
	(theme_dialog__install_theme_clicked): 
	set the file chooser dialog modal.

	* src/gthumb-window.c (_window_add_monitor_event): fire
	a CREATED event if a CHANGED event happended on a file not present
	in the file list.
	
2004-08-30  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/fullscreen.c (fullscreen_start): fixed fullscreen mode.

2004-08-28  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gthumb-window.c (directory_changed): process monitor
	events sequentially.

2004-08-25  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* data/gthumb.desktop.in (MimeType): added supported mime types list.

2004-08-23  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* components/catalog-view/GNOME_GThumb_CatalogView.server.in.in:
        added nautilus:required_directory_content_mime_types
        attribute.  Suggested by Alexander Larsson.

2004-08-21  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/dlg-save-image.c (get_type_from_name): use strcasecmp
	instead of strcmp.

	Fixes bug #150729: Problems handling JPEG.

2004-08-21  Kjartan Maraas  <kmaraas@gnome.org>

	* configure.in: Add «nb» to ALL_LINGUAS.

2004-08-15  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gthumb-window.c (window_update_statusbar_image_info)
	(window_new): added the resize grip to the statubar.

2004-08-14  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/fullscreen.c (set_action_active):
	* src/actions.c (set_action_sensitive):
	* src/gthumb-window.c (set_action_sensitive):
	(get_slideshow_random_image): removed debugging code.

2004-08-11  Mohammad DAMT  <mdamt@bisnisweb.com>
	
	* configure.in: Added "id" (Indonesian) in ALL_LINGUAS
	* po/id.po: Added Indonesian translation done by Abdul Hamid.A.N 
	<hameed@linuxmail.org>
 
2004-08-09  Amanpreet Singh Alam <aalam@redhat.com>
	
	* configure.in: +punjabi locale

2004-08-06  Paolo Bacchilega  <paobac@cvs.gnome.org>

	[ gthumb 2.5.0 released ]

2004-07-30  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* data/gthumb.1: added --import-photos option documentation.

2004-07-29  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/jpegutils/jpeg-data.c: 

	Fixed bug #148301: gthumb doesn't compile without libexif

	* src/fullscreen.c (fullscreen_start): 

	Fixed bug #148303: Fullscreen window always appears on first
	screen in xinerama.  Patch by Bastien Nocera.

2004-07-27  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/dlg-search.c (search_clicked_cb): 
	* libgthumb/search.c (search_util_get_file_patterns): new function

	Fixes bug #148571: Problem with regular expressions	

2004-07-24  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/dlg-file-utils.c (dlg_copy_items): 
	* src/dlg-file-utils.h (dlg_copy_items): added overwrite_all option.

2004-07-19  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gthumb-window.c (image_comment_button_press_cb): show the
	comment dialog when double-clicking on the comment pane.

2004-07-17  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/gth-image-list.c (gth_image_list_realize): 
	(truncate_comment_if_needed): 
	
	calculate the approximate char width and use that value when
	truncating a comment.

2004-07-15  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/dlg-categories.c (ok_clicked_cb): reload the image after 
	saving the categories.

2004-07-14  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/dlg-categories.c (dlg_categories_new): do not create more than
	one categories dialog.

2004-07-13  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gthumb-window.c (save_pixbuf__image_saved_cb): 

	Fixed bug #146522: reset sequence after save. 
	Patch by G Sunil Tukrel.
	
2004-07-10  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gthumb-window.c (save_pixbuf__image_saved_cb) 
	(image_loaded_cb): 

	Fixes bug #144099: EXIF data not preserved when image is manipulated.

2004-07-09  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/gtk-utils.c (_gtk_error_dialog_from_gerror_run): 
	display the error dialog only if the message is not null.

2004-07-05  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/fullscreen.c (fullscreen_stop): show_all after exiting
	fullscreen mode.

2004-07-04  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/dlg-comment.c: 
	* src/dlg-categories.c: Make the comments dialog and the categories
	dialog modeless.  Fixes Bug #142941.

2004-06-30  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/dlg-comment.c (dlg_comment_update): If there is no comment then 
        all fields must be considered to differ.  Patch by Martin Ebourne.

2004-06-28  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-exif-utils.c (get_exif_tag_short): 
	* src/dlg-jpegtran.c (update_rotation_from_exif_data): use the 
	orientation value instead of the orientation string.

	* configure.in (HAVE_LIBEXIF): 
	* src/gth-exif-utils.c (get_exif_entry_value): make gthumb compatible
	with both libexif 0.5.x and 0.6.x

2004-06-27  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gthumb-window.c (go_to_location, set_dir_list_continue): refocus
	the location entry after an autocompletion.

2004-06-23  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-exif-data-viewer.c: added EXIF_TAG_ISO_SPEED_RATINGS 

2004-06-22  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/actions.c (activate_action_help_about): updated copyright to 
	2004.  Bug #144825.

2004-06-19  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/ui.h: use GTK_STOCK_ADD insead of GTHUMB_STOCK_BOOKMARK

	* src/gthumb-window.c (catalog_activate_continue) 
	(catalog_activate_continue, catalog_activate) 
	(window_set_sidebar_content): set image viewer void if the current 
	image is not present in the image list.

	* src/fullscreen.c (fullscreen_stop): use gtk_widget_show instead of
	gtk_widget_show_all.

2004-06-18  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/ui.h: fix tooltip text.

	* data/gthumb.desktop.in (Categories): Added Viewer.

	* configure.in: require at least libexif 0.6.9 now

	* src/gth-exif-data-viewer.c (update_exif_data): 
	* src/gth-exif-utils.c (get_exif_entry_value): new function.

2004-06-15  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gthumb-window.c (window_hide_sidebar): update the zoom info.

2004-06-13  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* data/albumthemes/*.gthtml: make pages fit the browser window.
	
	* src/gth-exif-utils.c (get_exif_time): set daylight saving time to 1.

2004-06-12  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/print-callbacks.c (print_catalog): do not scale images
	before printing.

2004-06-11  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/dlg-photo-importer.c (get_folder_name): use "%Y-%m-%d--%H.%M.%S"
	instead of "%Y-%m-%d--%H:%M:%S" as the default film name.

2004-06-10  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/ui.h: fixed typo.

2004-06-09  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gthumb-window.c (window_show_cb): restore saved toolbar and
	statusbar visibility.

	* data/glade/gthumb_tools.glade: 
	* src/dlg-write-to-cd.c (dlg_write_to_cd): remove recursive option.

	* src/main.c (convert_to_new_comment_system): automatically migrate to
	the new comment system.

	* src/gthumb-window.c (close_preview_image_button_cb): 
	added a close button for the preview content bar, related to bug
	#143023.

	* src/dlg-write-to-cd.c: 
	* src/dlg-write-to-cd.h: new files.  Added ability to write images
	to CDs using nautilus.

2004-06-08  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gthumb-window.c (_proc_monitor_events): ignore hidden 
	directories.

2004-06-07  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gth-folder-selection-dialog.c: 
	* src/dlg-duplicates.c:
	* src/dlg-photo-importer.c:
	* src/dlg-png-exporter.c:
	* src/dlg-preferences.c:
	* src/dlg-search.c:
	* src/dlg-web-exporter.c:
	* libgthumb/dlg-save-image.c: 

	Fixes bug #139569: Gthumb doesn't use the new filechooser. 
	Patch by Mattias Eriksson.
	
	* src/fullscreen.c (fullscreen_new, close_fullscreen_window_cb): 

	Fixes bug #143426: crash when using Alt+F4 to exit after slideshow
	
	* src/gthumb-window.c: 
	* src/gthumb-window.h: 
	* src/actions.c: 
	* src/actions.h: 
	* src/ui.h: use the gtk+ ui manager to create menus and toolbar.

2004-05-29  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* configure.in: updated version to 2.5.0

2004-05-28  Paolo Bacchilega  <paobac@cvs.gnome.org>

	[ gthumb 2.4.0 released ]

2004-05-26  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/dlg-file-utils.c (folder_copy): delete the old destination folder
	comment if it exists.

2004-05-24  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* data/gthumb.schemas.in: fixes bug #143020 : gthumb should default to 
	Folders view on first load.

	* data/gthumb-ui.xml: fixes bug #143024 : gthumb-ui.xml error prevents 
	Slideshow accelerator from working.

2004-05-22  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* doc/C/gthumb.xml: 
	* src/commands-impl.c (help_about_command_impl): changed email
	address.

2004-05-24  Stanislav Visnovsky  <visnovsky@nenya.ms.mff.cuni.cz>

	* configure.in: Added "sk" (Slovak) to ALL_LINGUAS.

2004-05-22  Paolo Bacchilega  <paolo@localhost.localdomain>

	* src/gthumb-window.c (add_image_list_to_catalog): new function.
	(image_list_drag_data_received): add images to the current catalog.

	Fixes bug #142929

	* data/glade/gthumb_comments.glade: Moved the "Selected Categories"
	entry to the bottom.  Attempt to fix bug #142987

2004-05-21  Paolo Bacchilega  <paolo@localhost.localdomain>

	* src/dlg-photo-importer.c (get_folder_name): save the film name
	(dlg_photo_importer): set the default film name

	* data/gthumb.schemas.in: added film property

2004-05-20  Paolo Bacchilega  <paolo@localhost.localdomain>

	* src/gthumb-window.c (notify_files_deleted__step2) 
	(notify_files_added__step2): update sensitivity after adding or 
	removing files.

2004-05-18  Paolo Bacchilega  <paolo@localhost.localdomain>

	* data/gthumb-ui.xml: added a popup menu for the dir list.

	* libgthumb/gthumb-init.c (gthumb_init): add the dir monitoring before
	preloading.
	(gthumb_release): remove dir monitoring here.

	Fixes bug #142619

	* src/commands-impl.c (edit_current_folder_categories__done): check
	whether the modified folder is in the folder list before updating
	the folder view.

2004-05-08  Iñaki Larrañaga  <dooteo@euskalgnu.org>

	* configure.in: Added "eu" (Basque) to ALL_LINGUAS.

2004-05-07  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/dlg-photo-importer.c: allow to download video and audio files
	from the camera.

	* src/dlg-rename-series.c (dlg_rename_series): 
	
	Fixes debian bug #241800: gthumb: incorrect treatment of accented 
	character in tools - rename series

2004-04-28  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* data/albumthemes/BlueStripes/image.gthtml
	* data/albumthemes/BlueStripes/index.gthtml
	* data/albumthemes/BlueStripes/thumbnail.gthtml
	* data/albumthemes/Classic/image.gthtml
	* data/albumthemes/Classic/index.gthtml
	* data/albumthemes/Classic/thumbnail.gthtml
	* data/albumthemes/ClassicClips/image.gthtml
	* data/albumthemes/ClassicClips/index.gthtml
	* data/albumthemes/ClassicClips/thumbnail.gthtml
	* data/albumthemes/Clean/image.gthtml
	* data/albumthemes/Clean/index.gthtml
	* data/albumthemes/Clean/thumbnail.gthtml
	* data/albumthemes/NeatRound/image.gthtml
	* data/albumthemes/NeatRound/index.gthtml
	* data/albumthemes/NeatRound/thumbnail.gthtml
	* data/albumthemes/NeatSquare/image.gthtml
	* data/albumthemes/NeatSquare/index.gthtml
	* data/albumthemes/NeatSquare/thumbnail.gthtml
	* doc/theme-xml.txt
	* src/albumtheme-private.c
	* src/albumtheme-private.h
	* src/albumtheme.l
	* src/albumtheme.y

	Removes the style attributes and uses the css classes instead.
	Added the class attribute to the gthumb:image tag.
	Added 6 new readable variables: image_width, image_height, 
	  preview_width, preview_height, thumb_width, thumb_height.
	Added * and / to the expression evaluation.
	Added a new tag, <gthumb:eval expr="expression here"/>

	Patch by Martin Ebourne <martin AT zepler DOT org>

2004-04-25  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/dlg-web-exporter.c (install_theme__ok_cb): init command_line to
        NULL

	* src/dlg-png-exporter.c (export): set the default value for 
	type_extension.

	* libgthumb/gnome-print-font-picker.c 
	(gnome_print_font_picker_set_mode): remove useless check.

	* libgthumb/file-utils.c (file_copy): remove n <= 0 condition.

	* libgthumb/cursors.c (cursor_get): remove useless check.

	* libgthumb/gth-file-list.c (gth_file_list_select_image_by_pos): 
	init offset to 0.5

	* libgthumb/gth-image-list.c (real_move_cursor): init offset to -1.0

	* libgthumb/file-utils.c (file_copy): use size_t instead of int.

	* src/dir-list.c (dir_list_refresh_continue): set dir_list

	* libgthumb/preferences.c (pref_get_real_toolbar_style): 
	* src/gth-toggle-button.c (gth_toggle_button_set_style): 
	* src/e-combo-button.c (e_combo_button_set_style): 
	* src/gthumb-window.c (window_notify_update_toolbar_style): 
	
	s/both_horiz/both-horiz/

	* src/gthumb-window.c (key_press_cb):
	* src/fullscreen.c (image_key_press_cb): use '2' to set the zoom 
	level to 2, and '3' to set it to 3.0.

	* data/albumthemes/*/preview.png: ops, forgot to resize previews :)

2004-04-25  Paolo Bacchilega  <paobac@cvs.gnome.org>

	[ gthumb 2.3.3 released ]

2004-04-22  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/file-utils.c (path_is_dir): remove the warning.

	* libgthumb/comments.c (save_comment): unescaped comment filename
	before saving. Patch by Matthew West (gnomebugzilla@matthewwest.co.uk)

2004-04-20  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/fullscreen.c (create_popup_window): added zoom buttons to the 
	toolbar.

2004-04-18  Sami Pesonen  <sampeson@iki.fi>

	* configure.in: Added "fi" (Finnish) to ALL_LINGUAS.

2004-04-10  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/file-utils.c (image_is_jpeg): added workaround for bug in 
	gnome_vfs_mime_type_from_name_or_default.

2004-04-06  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/file-utils.c (path_in_path): new function, used to find
	a path contained in another path.

	* src/dlg-search.c (file_respects_search_criteria): 
	* src/gthumb-window.c (window_notify_directory_new)
	(window_notify_directory_delete): 
	* src/dlg-file-utils.c (folder_copy): 
	* src/commands-impl.c (folder_copy__response_cb): use the above
	function.

	* doc/C/gthumb.xml: Updated the manual.

	* data/gthumb-ui.xml: added a separator in the File->Folder menu.

2004-04-04  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gthumb-window.c (make_url_list): 

	Fixes bug #138979: DnD for non-Latin1 filenames fails.
	Patch by Ilya Konstantinov (gnome-bugzilla@future.shiny.co.il)

2004-03-30  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gthumb-window.c (save_pixbuf__image_saved_cb): set 
	image_modified = FALSE if the current image has been saved.

2004-03-29  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/gthumb-slide.c (gthumb_draw_slide): make the inner border
	slimmer.

2004-03-23  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gthumb-window.c (window_new): set the position of the paned
	window.

2004-03-22  Paolo Bacchilega  <paobac@cvs.gnome.org>

	[ gthumb 2.3.2 released ]
	
2004-03-26  Zygimantas Berucka  <uid0@akl.lt>

	* configure.in: Added "lt" (Lithuanian) to ALL_LINGUAS.

2004-03-21  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* libgthumb/comments.c (save_comment): use unescape = FALSE for saving
	comments.

	* src/fullscreen.c (get_file_info): 

	Fixes bug #137860 (New - full screen image info date is not from exif 
	data).

	* libgthumb/file-utils.c (file_is_image): workaround for bug in 
	gnome_vfs_mime_type_from_name_or_default.

	Fix bug #136168 (Images with capitalized extensions (.JPG) are not 
	found by the image search/browser).

	* libgthumb/gth-image-list.c (gth_image_list_button_press): do not emit
	the ITEM_ACTIVATED signal if Control of Shift is pressed.

	Fix bug #136451 (Quick multiple selection problem).

	* src/gthumb-window.c: 

	Fix bug #133452 (thumbnail-pane is resized when the application window 
	is resized).

	* libgthumb/gnome-print-font-picker.c: 
	* libgthumb/gnome-print-font-dialog.c: updated from gedit.

	* src/gthumb-window.c (window_update_zoom_sensitivity): update the zoom
	commands sensitivity.

	* libgthumb/print-callbacks.c (DEF_COMMENT_FONT): Change default font.
	(print_catalog_dlg, print_image_dlg): Use the default font if the 
	current one does not exist.

	* src/dlg-web-exporter.c (load_themes): automatically select the 
	current theme.

	* data/glade/gthumb_web_exporter.glade: reorganized a bit.

	* src/gthumb-window.c (dir_list_drag_data_received): 
	(image_list_drag_data_received): fix drag & drop.

2004-03-09  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* data/albumthemes/Clean/Makefile.am: 
	* data/albumthemes/NeatSquare/Makefile.am: 
	* data/albumthemes/NeatRound/Makefile.am: 
	* data/albumthemes/BlueStripes/Makefile.am: 
	* data/albumthemes/ClassicClips/Makefile.am: 
	* data/albumthemes/Classic/Makefile.am: Do not generate .gthtml files
	anymore.

	* data/albumthemes/*/index.xml.in: 
	* data/albumthemes/*/image.xml.in: 
	* data/albumthemes/*/thumbnail.xml.in: removed files.

	* data/albumthemes/*/index.gthtml: 
	* data/albumthemes/*/image.gthtml: 
	* data/albumthemes/*/thumbnail.gthtml: 
	* data/albumthemes/text.h: new files.

	Fix bug #126452 (Compilation error in data/albumthemse/BlueStripes 
	with index.xml.in parsing).
	
	* src/gthumb-window.c (ask_whether_to_save): removed unused variable.

2004-03-04  Paolo Bacchilega  <paobac@cvs.gnome.org>

	* src/gthumb-window.c (image_requested_error_cb): use 
	window_image_view_set_void.
	(real_set_void): ask whether to save before setting the viewer to void.
	(ask_whether_to_save): make the dialog not modal.

	* src/dlg-web-exporter.c: remove the destination manager.

	* data/glade/gthumb_comments.glade: 
	* src/dlg-comment.c (ok_clicked_cb): 
	* libgthumb/comments.c (comments_get_comment_as_string): init time_txt
	to ""

	Fix bug #136097 (gthumb 2.2.1 ignores "save only changed fields" 
	tickbox).

2004-02-24  Adam Weinberger  <adamw@FreeBSD.org>

		

2004-02-22  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-photo-importer.c (set_camera_model)
	(set_camera_model): Use gtk_label_set_text instead of 
	_gtk_label_set_locale_text.

	Fix bug #135110 (An UTF8 string was not converted to 
        the current locale (again)).

2004-02-16  Paolo Bacchilega  <paolo.bacch@tin.it>

	[ gthumb 2.3.1 released ]

2004-02-13  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-jpegtran.c: Fix orientation restoring.
	(ok_clicked): Fix apply to all.

2004-02-07  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gth-exif-utils.c: 

	Fix bug #133131 (exif orientation tag not updated).

	* src/gth-exif-utils.h: 

	Rename exif-utils.[ch] to gth-exif-utils.[ch]

	* src/dlg-jpegtran.c (update_rotation_from_exif_data): 

	Handle the 8 possible values of the orientation tag.

2004-01-27  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/print-callbacks.c (print_catalog_dlg): 

	Fix bug #132614 (Comment font option menu in print dialog is 
	not disabled by default).

2004-01-26  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-window.c (window_update_statusbar_image_info): 

	s/filename/path/

	* src/dlg-search.c (file_respects_search_criteria): 

	Fix bug #109016 (Searches should match directories too).

2004-01-24  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-window.c (window_update_statusbar_image_info): 

	Fix bug #112254 (status line shoudl use date from comment rather 
	than mtime).

	* src/dlg-file-utils.c (folder_copy): 

	Delete the comment cache before copying the folder.

	* data/glade/gthumb_comments.glade: 
	* src/dlg-comment.c: 

	Fix bug #130473 ("add comment" dialog uses ctime instead of mtime).

	* src/gthumb-window.c (key_press_cb): 

	Fix bug #130382 (gthumb keyboard usability issue).

2004-01-22  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-preferences.c (apply_cb): 
	* src/gthumb-window.c (get_next_slideshow_image): 
	* libgthumb/typedefs.h: 
	* data/gthumb.schemas.in: 
	* libgthumb/preferences.h (PREF_SLIDESHOW_DIR): 
	* libgthumb/preferences.c: 

	Fix bug #112254 (Needs Randomize Option on Slide Show).

2004-01-21  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-jpegtran.c (apply_transformation): 

	Fix bug #130823 (gthumb does not maintain permissions on files).
	Fix bug #130824 (gthumb does not complain about lack of permissions).

	* libgthumb/preferences.c (preferences_init): 

	Fix bug #130829 (gthumb ignores current directory when starting).
	
	* src/gthumb-window.c (create_new_file_list): 
	(window_set_preview_content): 
	
	Fix bug #131852 (Moving images via drag-and-drop no longer works).
	Fix bug #131853 (Changing folders produces flicker in image viewer).

	* src/dlg-file-utils.c (folder_copy): 

	Check whether the folder comment exists before including it in the 
	URIs to move.

	* src/gthumb-window.c (catalog_list_drag_leave)
	(dir_list_drag_leave): 

	Remove the auto load timeout after leaving.

2004-01-17  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/jpeg-utils.c (do_load_internal): escape the path before
	creating the uri.

2004-01-16  Paolo Bacchilega  <paolo.bacch@tin.it>

	[ gthumb 2.3.0 released ]

	* libgthumb/print-callbacks.c (add_catalog_preview): round result 
	before converting it to integer.

	* src/dlg-jpegtran.c (dlg_jpegtran): use the GTHUMB_STOCK_RESET icon.

	* src/gthumb-window.c (get_image_to_preload): check dimensions before 
	preloading an image.

2004-01-13  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/catalog-png-exporter.c: 
	* src/catalog-png-exporter.h: 	

	Use the image_loader instead of the thumb_loader.
	
2004-01-12  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/catalog-web-exporter.c: use the image_loader instead of 
	the thumb_loader.

2004-01-10  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-photo-importer.c (async_operation_step): fix 
	progress bar updating.

2004-01-09  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/main.c: add a --import-photos option to automatically open
	the import photos dialog.

	* src/dlg-photo-importer.c: make operations asynchronous.

	* libgthumb/comments.c (comments_get_comment_as_string):
	* src/gthumb-window.c (window_update_statusbar_image_info):
	* src/gth-exif-data-viewer.c (update_file_info):
	* src/fullscreen.c (get_file_info):
	* src/dlg-duplicates.c (images_selection_changed_cb):
	* components/image-viewer/viewer-stream.c (get_status):
 
	Fix bug  #126292 (Date shows badly if locale charset is not utf8).
	Patch by Egmont Koblinger.

2004-01-04  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-web-exporter.c (theme_dialog__go_to_folder_clicked): 
	* src/commands-impl.c (show_folder): do not launch nautilus 
	explicitly, use gnome_url_show instead.

2003-12-29  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-crop.c: 
	* src/gth-image-selector.c: more crop work.

	* libgthumb/icons/reset-16.png: 
	* libgthumb/icons/swap-24.png: new icons.

	* libgthumb/gthumb-stock.c: 
	* src/dlg-hue-saturation.c: 
	* src/dlg-color-balance.c: 
	* src/dlg-brightness-contrast.c: 
	* src/dlg-posterize.c: 
	* src/dlg-png-exporter.c: use the new stock icons.

	* libgthumb/gth-image-list.c (real_set_cursor): stop dragging if
	cursor changes.

2003-12-28  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/gth-image-list.c (gth_image_list_motion_notify): check
	selection != NULL.

	* src/gthumb-window.c (image_saved_func): do not add a saved image to
	the current catalog.

	* data/gthumb.schemas.in: 
	* libgthumb/typedefs.h: 
	* libgthumb/preferences.h: 
	* libgthumb/preferences.c: load and save crop aspect ratio.

	* data/glade/gthumb_crop.glade: 
	* src/dlg-crop.c: 
	* src/gth-image-selector.c: more crop work.

2003-12-27  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-crop.c (dlg_crop): more crop support.

2003-12-25  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-crop.h: 
	* src/dlg-crop.c: new files.  added initial crop support.

	* libgthumb/thumb-loader.c (thumb_loader): use a faster loader for 
	jpeg images.

	* libgthumb/image-loader.h: 
	* libgthumb/image-loader.c: 
	(image_loader_set_loader): allow to specify a custom loader.

	* libgthumb/jpeg-utils.h: 
	* libgthumb/jpeg-utils.c: new files.

	* libgthumb/image-loader.c (image_loader_sync_pixbuf): assign the 
	pixbuf inside the lock.

2003-12-23  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-image-prop.c (update_buttons_sensitivity): 
	* src/gthumb-window.c (window_update_sensitivity): update 
	"View Next Images" and "View Prev Image" sensitivity.

	* src/jpegutils/Makefile.am (noinst_LTLIBRARIES): 
	* src/Makefile.am (libjpegtran_la_LIBADD): fix bug #129858 
	(libgthumb-jpegutils.a isn't libtool library, does not link on 
	non-x86).  

	Patch by Matthew Wilson. 

2003-12-22  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/gnome-print-font-picker.c: 
	* libgthumb/gnome-print-font-dialog.c: updated from gedit.

2003-12-21  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-photo-importer.c (dlg_photo_importer): added 
	'update previews' and 'delete images from camera' buttons.

2003-12-18  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/gconf-utils.c (eel_gconf_set_path_list)
	(eel_gconf_get_path_list): new functions

2003-12-17  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/preferences.c: 
	* src/dlg-photo-importer.c: load and save dialog preferences; added a 
	destination entry instead of hardcoding it.

	* libgthumb/icons/film-16.png: resize icon to 16x16.

2003-12-16  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-window.c (close__step5): ask whether to save a modified 
	image before exiting.

	* data/gthumb-ui.xml: 
	* src/commands-impl.c (edit_current_folder_categories__done): add
	a command to edit folder categories.

	* src/dlg-photo-importer.c: add a 'Film' keyword to the created folder.

	* src/dir-list.c: 
	* src/main.c: 
	* src/gthumb-window.c: 
	* src/bookmark-list.c: use a specila icon for folders with the 'Film' 
	keyword.

	* libgthumb/file-utils.c (resolve_all_symlinks): handle nonexistent 
	files.

	* src/dlg-file-utils.c: 
	* src/commands-impl.c (folder_copy__response_cb): update the folder 
	comment when copying, moving and renaming a folder.

	* libgthumb/comments.c (comments_get_comment_filename): resolve the 
	full path.

2003-12-15  Abel Cheung  <maddog@linux.org.hk>

	* configure.in: Added "hr" to ALL_LINGUAS.

2003-12-15  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-duplicates.c (dlg_duplicates): rempve unused variable.

	* src/commands-impl.c (wallpaper_restore_command_impl): restore 
	wallpaper correctly when the picture_options value is 'none'.

	* src/dlg-photo-importer.c: put config.h before #ifdef HAVE_LIBGPHOTO
	

	* src/commands-impl.c (file_camera_import_command_impl): 
	* src/gthumb-window.c (window_new): do not compile camera support 
	if libgphoto is not present.

	* src/dlg-photo-importer.c (update_ui): add gdk_flush()

2003-12-14  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-categories.c (add_category_cb): automatically use a  
	created category.

	* src/dlg-photo-importer.c (ok_clicked_cb): remove old check.

2003-12-13  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/commands-impl.c (folder_rename): resolve the old path before 
	renaming.

2003-12-12  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-search.c: create the categories dialog with a new gui object;
	allow to save void searches.

2003-12-10  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-web-exporter.c: Implement destination manager.

2003-12-09  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-preferences.c (dlg_preferences): added "Ask whether to save
	modified images" option.

	* libgthumb/dlg-save-image.c (file_save_ok_cb): check write permissions
	before saving.

	* libgthumb/image-viewer.c (image_viewer_button_release): emit the 
	CLICK signal after ungrubbing the mouse pointer.

2003-12-08  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-window.c (ask_whether_to_save): ask whether to save a 
	modified image.

	* src/dlg-png-exporter.c (dlg_exporter): remove name examples.

	* src/dlg-rename-series.c (update_list): use %f, %d, %s instead of 
	*, ! and ? when renaming filenames.

	* libgthumb/glib-utils.c (_g_substitute_pattern): new function.

2003-12-07  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/print-callbacks.c (print_catalog_cb): 
	* libgthumb/print-callbacks.h: implement catalog printing.

	* src/dlg-jpegtran.c (apply_tranformation_generic, dlg_jpegtran): 
	implement generic transformations of non jpeg images.

2003-12-01  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-window.c (window_save_pixbuf): new function.

2003-11-23  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/gth-image-list.c (paint_item): paint all selected 
	thumbnails with the same color, always paint the focus for the focused 
	thumbnail.

	* src/gthumb-window.c (load_timeout_cb): do not preload the (pos + 2) 
	image.

	* src/gthumb-ui.xml: remove "exit".

2003-11-19  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-search.c (file_respects_search_criteria): use the file mtime
	if no time is defined in the comment.

2003-11-18  Paolo Bacchilega  <paolo.bacch@tin.it>

	[ gthumb 2.1.9 released ]

2003-11-11  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/image-loader.c: do not use the private uri outside the 
	locks. 

2003-11-07  Paolo Bacchilega  <paolo.bacch@tin.it>

	* Makefile.am (SUBDIRS): remove omf-install

	* src/catalog-web-exporter.c (save_resized_image_cb): update the
	image size if the original image is resized.

2003-11-04  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/Makefile.am (libgthumbdir): install the library in
	$(libdir)/gthumb (patch by Götz Waschk
	<waschk@informatik.uni-rostock.de>)

2003-11-03  Bastien Nocera  <hadess@hadess.net>

	* configure.in: added en_GB translation by Peter Oliver
	<bugs@mavit.freeserve.co.uk>

2003-11-02  Paolo Bacchilega  <paolo.bacch@tin.it>

	[ gthumb 2.1.8 released ]

	* src/dir-list.c (dir_list_add_directory): do not use an hardcoded
	icon size, get the size from the gtk theme instead.

	* src/gthumb-window.c (window_notify_directory_rename): check
	whether the new name is a first level subdir before adding it to
	the dir list.

	* src/catalog-png-exporter.c (end_export): 
	* src/dlg-change-date.c (ok_clicked): explicitly notify changes.

	* src/gthumb-window.c (get_image_to_preload, load_timeout_cb):
	preload an image only if it is smaller than PRELOADED_IMAGE_MAX_SIZE.

	* src/catalog-web-exporter.c (export__copy_to_destination__step2):
	display an error dialog if something went wrong.

2003-10-25  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-change-date.c: 
	* src/dlg-rename-series.c: include gnome-help.h

	* src/gthumb-window.c (create_new_file_list): use ACTION_MOVE when
	dragging in gthumb, ACTON_COPY for all other apps.

2003-10-19  Paolo Bacchilega  <paolo.bacch@tin.it>

	* add-include-prefix: make the script portable (patch from Pav
	Lucistnik <pav@oook.cz>)

2003-10-13  Paolo Bacchilega  <paolo.bacch@tin.it>

	[ gthumb 2.1.7 released ]  

2003-10-11  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-window.c (window_new): insert the preview buttons
	outside the info bar.

2003-10-09  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/gth-image-list.c (paint_item): draw the selection
	outside the thumbnail not inside it.

2003-10-05  Paolo Bacchilega  <paolo.bacch@tin.it>

	* data/albumthemes/*/*.xml.in: little changes.

	* src/dlg-categories.c (dlg_categories): 
	* src/dlg-comment.c (dlg_edit_comment): Set the transient for
	window the window the viewer belongs to.  This is because comment
	and categories dialogs can be used even in fullscreen mode.

	* doc/C/gthumb.xml: updated.

2003-10-04  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-convert.c (load_current_image): notify files created and
	deleted.

	* doc/C/gthumb.xml: updated.

	* src/gthumb_convert.glade: 
	* src/gthumb_tools.glade: 
	* src/dlg-convert.c (help_cb): 
	* src/dlg-rename-series.c (help_cb): 
	* src/dlg-change-date.c (help_cb): add a help button for some dialogs.

	* libgthumb/comments.c (save_comment): init strings to NULL.

	* src/gthumb-window.c (image_requested_error_cb): view the image
	filename even if the image could not be loaded.

	* src/dlg-file-utils.c (file_move_response_cb): remove a g_print

	* libgthumb/file-utils.c (get_dest_free_space): new function.

2003-10-02  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/fullscreen.c (fullscreen_start): set the window screen.

2003-09-29  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-ui.xml: always use the name Catalog for the catalog
	submenu, even when the catalog is a search.

	* doc/C/gthumb.xml: started updating manual.

	* libgthumb/dlg-save-image.c (file_save_ok_cb): check whether the
	image type is writable before trying to write the image, and warn
	the user if it's not.

2003-09-28  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-comment.c (dlg_edit_comment): use have_exif_data.

	* src/exif-utils.c (have_exif_data): new function.

	* src/fullscreen.c (fullscreen_start): do not hide the main
	window.
	
	* libgthumb/gth-file-list.h: 
	* libgthumb/gth-file-list.c (gth_file_list_init) 
	(interrupt_thumbs__part2, gth_file_list_interrupt_thumbs) 
	(start_update_next_thumb): do not allow to interrupt an interruption.

2003-09-14  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/Makefile.am (EXTRA_DIST): add gthumb.schemas.in

	* src/dlg-preferences.c: 
	* src/gthumb-window.c: 
	* src/dlg-web-exporter.c: 
	* libgthumb/preferences.c: use the new functions.

	* libgthumb/gconf-utils.c (eel_gconf_set_path) 
	(eel_gconf_get_path): new functions, used to save paths in gconf
	substituting the home dir with a tilde.

2003-09-11  Andras Timar  <timar@gnome.hu>

	configure.in: Added "hu" to ALL_LINGUAS.

2003-09-01  Metin Amiroff  <metin@karegen.com>

	configure.in: Added "az" in ALL_LINGUAS.

2003-09-01  Paolo Bacchilega  <paolo.bacch@tin.it>

	[ gthumb 2.1.6 released ]  

2003-08-31  Wang Jian  <lark@linux.net.cn>

	* configure.in: Added "zh_CN" to ALL_LINGUAS.

2003-08-25  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-comment.c: use the global get_exif_time function.

2003-08-24  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/exif-utils.c: 
	* src/exif-utils.h: 
	* src/gth-exif-data-viewer.c: 
	* src/gth-exif-data-viewer.h: new files.

2003-08-22  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/file-utils.c (resolve_all_symlinks_uri): unref uri
	after appending the resolved uri.

2003-08-21  Paolo Bacchilega  <paolo.bacch@tin.it>

	* configure.in: add BlueStripes theme, remove Simple theme.

	* src/jpegutils/transupp.h: do not include config.h

2003-08-20  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/catalog-png-exporter.c (catalog_png_exporter_init): use
	PANGO_WRAP_WORD_CHAR instead of PANGO_WRAP_CHAR

	* libgthumb/preferences.c (pref_util_get_int_value) 
	(pref_util_get_rgb_values): fix warning.

2003-08-19  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/catalog-web-exporter.c (thumb_loader_done): unref pixbuf
	before changing its value.

2003-08-18  Paolo Bacchilega  <paolo.bacch@tin.it>

	[ gthumb 2.1.5 released ]  
	
2003-08-18  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-window.c (window_go_to_directory): restore
	interruption of the file list filling before changing folder.

2003-08-16  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/catalog.c (file_is_search_result): check if the line
	is void.

	* src/dlg-catalog.c (new_dir_cb): handle utf8 names.

	* src/catalog-web-exporter.c (save_image_preview_cb): fix condition

	* src/dlg-jpegtran.c (dlg_jpegtran, destroy_cb): update images
	manually instead of hoping that the monitor will work correctly.

	* src/dlg-convert.c (load_current_image) 
	(save_image_and_remove_original): chack whether source and
	destination are the same image.

	* src/catalog-list.c (catalog_list_refresh): handle invalid names.

	* src/dlg-file-utils.c (dlg_files_copy): 
	(dlg_files_delete): 
	(folder_copy): use the right glade file here.

	* src/dir-list.c (dir_list_update_view): handle invalid names.

2003-08-15  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-window.h: remove not used variable.

	* many_files: use g_filename_* instead of g_locale_* where
	appropriate.
	
	* Makefile.am (EXTRA_DIST): remove gthumb.spec and gthumb.spec.in

	* configure.in: update required libraries.
	(GTHUMB_CFLAGS): remove bonobo-activation

2003-08-12  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-change-date.c (dlg_change_date): make the exif option
	insensitive if the image has no exif data.

	* components/image-viewer/viewer-control.h (_VIEWER_CONTROL):
	rename VIEWER_CONTROL to _VIEWER_CONTROL.

	* libgthumb/dlg-save-image.c (CONVERT_GLADE_FILE) 
	(dlg_save_options): rename GLADE_FILE to CONVERT_GLADE_FILE.

	* src/gthumb-window.c (setup_toolbar_combo_button): 
	* src/gthumb-ui.xml: use a custom tooltip for the back button.

2003-08-11  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/catalog-web-exporter.c (save_resized_image_cb) 
	(export__copy_image__progress_update_cb, export__copy_image) 
	(thumb_loader_done): fix bug #117668

	* libgthumb/gth-file-list.c (gth_file_list_update_next_thumb):
	ref/unref the current thumb file data.

2003-08-10  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb_preferences.glade: 
	* src/gthumb_png_exporter.glade: fix bug #119546.

	* libgthumb/comments.c (save_comment): escape text before saving
	the comment (bug #119499).

2003-08-09  Paolo Bacchilega  <paolo.bacch@tin.it>

	[ gthumb 2.1.4 released ]  
	
2003-08-09  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/jpegutils/Makefile.am (INCLUDES): add libghtumb dir.

	* src/gthumb-window.c (window_sync_menu_with_preferences): make
	this function static.

	* src/main.c (all_windows_update_viewer_options): remove this function.

	* libgthumb/preferences.c (pref_util_get_rgb_values): 
	(pref_util_get_int_value): check null pointers.

	* libgthumb/file-utils.c (visit_rc_dir_data_new): 
	* libgthumb/comments.c (crd_interrupt_cb, remove_comments_done) 
	(comments_remove_old_comments_async): allow to interrupt this
	operation.

2003-08-08  Paolo Bacchilega  <paolo.bacch@tin.it>

	* data/albumthemes/Classic/image.xml.in: 
	* data/albumthemes/ClassicClips/image.xml.in: 
	* data/albumthemes/NeatRound/image.xml.in: 
	* data/albumthemes/NeatSquare/image.xml.in: use a small size for
	the note.

	* src/commands-impl.c (folder_delete__continue): allow to not
	display the message again.

	* src/dlg-file-utils.c (file_delete_progress_update_cb) 
	(files_delete__done): do not collect deleted files, notify changes
	only if deletion is completed, otherwise update current view.

	* data/albumthemes/*: update themes to conform to the new rules.
	
	* src/gthumb-window.c (item_toggled_handler):
	update toggle menu items correctly.
	
	* src/gthumb-window.c (initial_location_cb):
	* src/commands-impl.c (file_new_window_command_impl): 
	* src/main.c (prepare_app, load_session): 
	* libgthumb/preferences.h: 
	* libgthumb/preferences.c (preferences_set_startup_location) 
	(preferences_get_startup_location): do not save the temporary
	startup location in the gconf key (bug #119334).
	
	* a_lot_of_files: specify a default value when reading a gconf key.

2003-08-07  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/catalog-web-exporter.c (gth_parsed_doc_print, get_exif_tag):
	print a "-" when no exif data is available.
	(get_preview_filename): do not save the preview if it has the same
	dimensions of the image.

	* src/gthumb.schemas.in: add album header and footer, remove title.

2003-08-06  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/catalog-web-exporter.c: create a medium sized image preview
	to be used in the image.hml files (bug #117668).

	* src/gthumb_web_exporter.glade: 
	* libgthumb/preferences.h: 
	* src/dlg-web-exporter.c: Add header and footer for web albums,
	remove the album title.

	* src/albumtheme-private.c: 
	* src/albumtheme-private.h: 
	* src/albumtheme.y: 
	* src/albumtheme.l: 
	* src/catalog-web-exporter.c (gth_parsed_doc_print): allow
	to translate the text in the album files.

	* src/gthumb-ui.xml: remove the pixbuf arg.

	* src/catalog-png-exporter.c (get_hf_text): handle text in utf-8
	format.

2003-08-05  Paolo Bacchilega  <paolo.bacch@tin.it>

	* configure.in: fix bug #119135.

2003-08-04  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/albumtheme.l: allow names to contain numbers.

	* src/catalog-web-exporter.c (load_next_file, thumb_loader_done) 
	(export__copy_image, export__copy_image__progress_update_cb) 
	(save_resized_image_cb): load and save images one at a time,
	instead of loading them all and then saving.

	* data/albumthemes/Clean/index.gthtml: 
	* data/albumthemes/Clean/image.gthtml: 
	* data/albumthemes/Clean/lest_arrow.png:
	* data/albumthemes/Clean/right_arrow.png:
	* data/albumthemes/Clean/up_arrow.png: use images instead of text.

	* src/dlg-jpegtran.c (apply_tran): display the error with a dialog.
	* src/jpegutils/jpegtran.c (jpegtran): use a custom error handler.

	* src/catalog-web-exporter.c (export__copy_images) 
	(export__save_images, image_data_new): rename images before
	copying them to the destination. (fixes bug #118098).

	* src/gthumb.schemas.in: fix message inconsistency (bug #118958).

2003-07-31  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-web-exporter.c (export): keep the title in utf-8 format
	(bug #118503).

2003-07-07  Abel Cheung  <maddog@linux.org.hk>

	* src/Makefile.am: gthumb.schemas -> schemas.in, and fixed typo.

2003-07-27  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-window.c (window_notify_update_layout_cb): update the
	layout after a timeout and do not destroy the main_pane widget.

	* libgthumb/image-loader.c (image_loader_load_from_image_loader):
	set uri to NULL after unreferencing

	* libgthumb/thumb-cache.c (cache_get_nautilus_cache_name): check
	whether uri_txt == NULL

	* src/dlg-file-utils.c (dlg_file_rename_series, dlg_files_delete) 
	(folder_copy, dlg_files_copy): remove the monitor while processing
	files.

2003-07-25  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/preferences.h (PREF_MSG_CANNOT_MOVE_TO_TRASH): 
	* src/dlg-file-utils.c (real_files_delete__continue) 
	(_gtk_yesno_dialog_with_checkbutton_new): add a checkbutton to
	allow the user to not display the warning again.

2003-07-22  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-window.c (close__step5): do not save the
	visualizzation options if the window is maximized.

2003-07-21  Paolo Bacchilega  <paolo.bacch@tin.it>

	* data/albumthemes/Clean/*
	* configure.in: new album theme

2003-07-20  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/thumb-cache.c
	(nautilus_cache_remove_old_previews_async): handle interruption.
	(get_real_name_from_nautilus_cache): return NULL if an error occurred.

	* libgthumb/file-utils.c (directory_load_cb): use 
	gnome_vfs_async_cancel when interrupted.

2003-07-19  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-image-prop.c (dlg_image_prop_new): 
	* src/gthumb-window.c (window_new): fix bug #117008

	* src/dlg-categories.c (add_category_cb): do not allow commans in
	category names (bug #117729)

2003-07-08  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/main.c (prepare_app): 
	* src/gthumb-window.c (set_file_list__final_step_cb): do not
	create the "Command Line" catalog if the user specifies only one
	image, go to the image folder instead.

	* libgthumb/print-callbacks.c (print_info_unref): check null pointers.

2003-07-09  Frederic Crozat  <fcrozat@mandrakesoft.com>

	* src/gthumb.schemas:
	fix type in schema.

2003-07-06  Paolo Bacchilega  <paolo.bacch@tin.it>

	[ gthumb 2.1.3 released ]  
	
2003-07-06  Paolo Bacchilega  <paolo.bacch@tin.it>

	* data/albumthemes/*/*.gthtml: updated to allow the user to
	personalize the captions.

	* src/gthumb-ui.xml: fix bug #116386.

	* libgthumb/gthumb-init.c (gthumb_init): preload some gconf dirs.

	* libgthumb/gtk-utils.c (_gtk_yesno_dialog_new) 
	(_gtk_request_dialog_run): no title for dialogs.

	* libgthumb/preferences.h: 
	* src/dlg-web-exporter.c (show_caption_dialog_cb) 
	(caption_dialog__ok_clicked): load and save preferences.

2003-07-02  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/gtk-utils.c (_gtk_message_dialog_new): remove the title.

	* src/albumtheme.y: 
	* src/albumtheme.l: 
	* src/catalog-web-exporter.c (get_var_value): added ability to
	personalize the album theme.

2003-06-28  Artur Flinta  <aflinta@cvs.gnome.org>

	* configure.in: Added "pl" to ALL_LINGUAS.
	
2003-06-19  Abel Cheung  <maddog@linux.org.hk>

	* configure.in: Added "mk" to ALL_LINGUAS.

2003-06-18  Guntupalli Karunakar  <karunakar@freedomink.org>

	* configure.in: Added "ml" in ALL_LINGUAS.

2003-06-08  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-comment.c (ok_clicked_cb): fix bug #114679

	* src/catalog-png-exporter.c (paint_text): do dot translate text
	in utf format again.
	(set_item_caption): translate filenames to utf8 format.

	* libgthumb/print-callbacks.c (print_cb): allow to set custom
	paper size.

	* libgthumb/preferences.c: added more print preferences.

	* libgthumb/gconf-utils.c (eel_gconf_get_float): new function.

	* libgthumb/comments.c (comments_get_comment_filename): allow to
	unescape the path.

2003-06-02  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/gthumb-canvas-text.c: 
	* libgthumb/gthumb-canvas-text.h: removed files.
	
	* libgthumb/gnome-print-font-picker.c: 
	* libgthumb/gnome-print-font-picker.h: 
	* libgthumb/gnome-print-font-dialog.c: 
	* libgthumb/gnome-print-font-dialog.h: new files.

	* libgthumb/print-callbacks.c (print_image_dlg): user can choose
	comment font; better preview; remember all settings; allow to set
	custom paper size.


2003-05-25  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-window.c (viewer_drag_data_received): 
	* src/dlg-search.c (view_result_cb): 
	* src/main.c (initialize_data): translate the catalog name to the
	locale encoding before saving it.

2003-05-18  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/catalog-web-exporter.c: 
	* src/dlg-web-exporter.c: added ability to resize images before
	copying them to the destination.

	* data/albumthemes/*/index.gthtml: 
	* data/albumthemes/*/image.gthtml: added Content-Type and
	Generator meta tags.

2003-05-06  Danilo Å egan  <dsegan@gmx.net>

	* configure.in: Added "sr" and "sr@Latn" to ALL_LINGUAS.

2003-05-04  Paolo Bacchilega  <paolo.bacch@tin.it>

	[ gthumb 2.1.2 released ]  

2003-05-02  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-window.c (key_press_cb): use control-1/2/3 to set the
	preview content.

2003-05-01  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb_print.glade: display size in millimeters

	* libgthumb/print-callbacks.c (print_image_dlg): add A3, A5
	types. 

2003-04-30  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/print-callbacks.c (print_image_dlg): new print dialog,
	load and save user preferences.

	* src/fullscreen.c (fs_motion_notify_cb): do not show the toolbar
	if the mouse is moved "slowly".

	* libgthumb/gth-image-list.c (gth_image_list_motion_notify):
	ignore kinky event->y values (a gtk bug ?).

2003-04-28  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-window.c (window_update_statusbar_zoom_info): hide
	the zoom info frame when the image is not visible.
	(window_update_sensitivity): do not allow to edit the image if the
	image is not visible.

	* src/gthumb.schemas: 
	* libgthumb/preferences.h (PREF_SEARCH_RECURSIVE): 
	* src/dlg-search.c (search_clicked_cb, dlg_search_ui): save the
	'Include sub-folders' option.

	* src/fullscreen.c (hide_mouse_pointer_cb): do not hide the
	toolbar if the mouse pointer is over it.

	* libgthumb/gth-image-list.c (gth_image_list_set_image_comment):
	(gth_image_list_set_image_text): 
	recalc text/comment size.

	* src/fullscreen.c (fullscreen_stop): restore correct visibility.
	(image_key_press_cb): keep in sync comment visibility in
	fullscreen and window mode.

2003-04-25  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/utf8-fnmatch.c (g_utf8_fnmatch): added a utf8 compatible
	fnmatch function.

	* src/dlg-search.c (pattern_matched_by_keywords, match_patterns): 
	use utf8_fnmatch.
	
	* src/dlg-rename-series.c (update_list): substitute ! with image
	size.

2003-04-29  Kang Jeong-Hee  <Keizi@mail.co.kr>

	* src/gthumb-window.c (window_new): #ifdef HAVE_LIBEXIF added.

2003-04-24  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-window.c (window_update_infobar)
	(window_update_title): use "[modified]" instead of "*"
	
	* src/dlg-posterize.c (dlg_posterize): 
	* src/dlg-color-balance.c (dlg_color_balance): 
	* src/dlg-hue-saturation.c (dlg_hue_saturation): 
	* src/dlg-brightness-contrast.c (dlg_brightness_contrast):
	remember whether the image was modified or not before calling the
	filter.

	* libgthumb/preferences.h: 
	* src/gthumb.schemas: added preview state keys.
	* src/gthumb-window.c (window_new, close__step5): load and save
	the preview state.
	(set_button_active_no_notify, preview_image_button_cb) 
	(preview_data_button_cb, preview_comment_button_cb, window_new):
	use toggle buttons and keep the buttons state in sync with the
	preview content.
	(info_bar_clicked_cb): fix the widget_to_focus logic.

	--
	
	* src/gthumb-window.c (set_preview_content) 
	(preview_image_button_cb, preview_data_button_cb) 
	(preview_comment_button_cb): added ability to change the preview
	content.

	* libgthumb/gth-image-list.c (gth_image_list_item_set_pixbuf): use
	the gtk theme background color as check color.
	(paint_item): paint the focus on the thumbnail if the filename is
	not displayed.

	* libgthumb/preferences.c (pref_get_view_mode): new function.
	
	* libgthumb/gth-file-list.c (gth_file_list_init): use
	pref_get_view_mode to get the view mode.
	(gth_file_list_set_list): clear before setting the list

	* src/commands-impl.c (alter_image_normalize_contrast_command_impl): 
	* src/commands-impl.c (alter_image_stretch_contrast_command_impl): 
	* libgthumb/async-pixbuf-ops.c (_gdk_pixbuf_iterate) 
	(_gdk_pixbuf_normalize_contrast): 
	(_gdk_pixbuf_stretch_contrast): implement normalize and stretch
	contrast.

	* src/commands-impl.c (file_save_command_impl): 
	* libgthumb/dlg-save-image.c (dlg_save_image): 
	* components/image-viewer/ui.c (verb_save_image): load the image
	after saving it.

2003-04-20  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-categories.c (cancel_clicked_cb): always save the categories.

2003-04-07  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-file-utils.c (create_overwrite_dialog): use zoom_quality
	not zoom_change.

	* libgthumb/file-utils.c (application_get_command): do not escape
	the command (bug #109619).

2003-04-06  Paul Duffy <dubhthach@frink.nuigalway.ie>

        * configure.in: Added ga (irish) to ALL_LINGUAS

2003-04-06  Christian Neumair  <chris@gnome-de.org>

	* .cvsignore: Updated.
	* src/commands-impl.c: UTF-8 escaped Copyright entry in about window.

2003-04-03  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-comment.c (dlg_edit_comment): 
	* src/dlg-image-prop.c (update_comment): set the cursor at the top

	* libgthumb/thumb-cache.c (cache_get_nautilus_cache_name): 
	* libgthumb/comments.c (comments_get_comment_dir) 
	(comments_get_comment_filename): if a path cannot be resolved use
	the user specified one, instead of returning NULL.

	* src/gthumb_preferences.glade: 
	* src/dlg-preferences.c: remove the check type and size options,
	just use good default values, though they can still be changed via
	gconf.

	* src/gthumb_comments.glade: 
	* src/dlg-comment.c (dlg_edit_comment): humanize the comment dialog.

2003-04-02  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/gth-file-list.c (gth_file_list_prev_image) 
	(gth_file_list_next_image): skip broken images correctly.

2003-03-28  Dmitry G. Mastrukov  <dmitry@taurussoft.org>

	* configure.in: Added Belarusian to ALL_LINGUAS.

2003-03-25  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-file-utils.c (copy_next_file, folder_copy): 
	* src/commands-impl.c (folder_rename, folder_copy__response_cb): 
	* libgthumb/comments.h: 
	* libgthumb/comments.c (comments_get_comment_filename) 
	(comments_get_comment_dir): save comments dereferencing symbolic
	links. (bug #109018)

2003-03-21  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-window.c (auto_load_library_cb,
	catalog_list_drag_motion): added auto load for catalog libraries.

2003-03-18  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-window.h: 
	* src/gthumb-window.c (auto_load_cb, dir_list_drag_motion) 
	(window_new, close__step5): auto load a folder when hovering on
	it during a 'drag & drop' operation, patch from 
	Jason Tackaberry <tack@auc.ca>

2003-03-16  Paolo Bacchilega  <paolo.bacch@tin.it>

	[ gthumb 2.1.1 released ]  

2003-03-14  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-rename-series.c (get_image_date, update_list): add
	ability to insert image date

2003-05-06  Yuriy Syrota <rasta renome.rovno.ua>

	* configure.in: Added "uk" (Ukrainian) to ALL_LINGUAS.

2003-03-07  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/pixbuf-utils.c (_gdk_pixbuf_save_as_jpeg): use bpp
	instead of 3.

	* src/albumtheme-private.c (gth_expr_eval): fix problem with unary 
        operations.

2003-05-06  Duarte Loreto <happyguy_pt@hotmail.com>

        * configure.in: Added "pt" to ALL_LINGUAS.

2003-03-01  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-window.h (GCONF_NOTIFICATIONS): 
	* src/gthumb-window.c (window_new): update back button style on
	the fly.

	* src/e-combo-button.c (e_combo_button_set_style): s/icon/icons/

2003-02-28  Paolo Bacchilega  <paolo.bacch@tin.it>

	[ gthumb 2.1.0 released ]  

2003-02-25  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/image-loader.c (load_image_thread): check if path != NULL

	* src/gthumb-window.c (window_show_prev_image) 
	(window_show_next_image): reinitialize the slideshow timer when
	the user manually move to another image.

2003-02-24  Paolo Bacchilega  <paolo.bacch@tin.it>

	* many files: added ability to change image list view.

2003-02-17  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/file-utils.c (resolve_all_symlinks): unref uri

2003-02-15  Paolo Bacchilega  <paolo.bacch@tin.it>

	* data/albumthemes/*: added some web album themes.

	* src/albumtheme.y: 
	* src/albumtheme.l: 
	* src/albumtheme-private.c: 
	* src/albumtheme-private.h: 
	* src/catalog-web-exporter.c: 
	* src/catalog-web-exporter.h: 
	* src/dlg-web-exporter.c: 
	* src/gthumb-window.c: implement a web album exporter.
	
2003-02-05  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-file-utils.c (file_progress_update_cb) 
	(file_delete_progress_update_cb, folder_progress_update_cb) 
	(real_files_delete__continue2): return FALSE on error, do not
	display the error dialog when the operation is interrupted.

	* src/dlg-convert.c (loader_done): use GTK_STOCK_NO instead of 
	GTK_STOCK_CANCEL.

2003-02-04  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dir-list.c (dir_list_update_icon_theme): 
	* src/gthumb-window.c (window_notify_update_icon_theme): 
	* src/main.c: 
	(theme_changed_cb, initialize_data, release_data): update the icon
	theme on the fly.

2003-02-03  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/gth-file-list.c (gth_file_list_prev_image) 
	(gth_file_list_next_image): 
	* src/gthumb-window.c (window_show_next_image) 
	(window_show_prev_image): slideshow include only selected images
	when more than one image is selected (bug #99093).

	* src/gthumb.schemas: 
	* src/gthumb-window.c (window_new, pref_black_background_changed) 
	* src/fullscreen.c (fullscreen_stop, fullscreen_start): added a
	black_background option to always use a black background for the
	image viewer.

2003-02-02  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/gth-image-list.c (gth_image_list_realize): use italic
	style for comments.

	* libgthumb/catalog-png-exporter.[ch]: moved to src/
	
	* libgthumb/gthumb-module.c: 
	* libgthumb/gthumb-module.h: 
	* src/Makefile.am: 
	* src/commands-impl.c: compile some tools as dynamic modules, and
	load them only when needed.

2003-01-30  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/gth-image-list.c (paint_item): do not paint the item
	if the position is not computed yet.

	* libgthumb/print-callbacks.c (print_image_dlg): ported to
	libgnomeprint 2.2
	
2003-01-29  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/gth-image-list.c: 
	* libgthumb/gth-image-list.h: new super fast widget.

	* src/auto-completion.c (auto_compl_show_alternatives): 
	* src/bookmark-list.c (bookmark_list_set): 
	* src/main.c (get_default_folder_pixbuf_size): 
	* src/dir-list.c (dir_list_refresh_continue): 
	* src/main.h: do not hardcode the icon size, use the theme setting
	instead.

	* src/main.c (get_folder_pixbuf, get_folder_icon_path): use a
	gnome_icon_theme object to get the folder icon.

	* src/dlg-file-utils.c (folder_copy): 
	* src/commands-impl.c (folder_rename, folder_copy__response_cb): cannot
        update the thumbnail cache any more.

	* libgthumb/thumb-cache.h:
	* libgthumb/thumb-cache.c: use the new thumbnail system.

2003-02-21  Pablo Saratxaga  <pablo@mandrakesoft.com>

	* configure.in: Added Catalan (ca) to ALL_LINGUAS

2003-01-26  Paolo Bacchilega  <paolo.bacch@tin.it>
	
	[ gthumb 2.0.1 released ]  

2003-01-26  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/image-list.c (image_list_clear): free the list.

2003-01-22  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/gnome-canvas-thumb.c (render_to_pixmap): cache the
	last rendered pixbuf.

2003-01-21  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/file-data.c (file_data_set_path): do not free
	fd->utf8_name here.

2003-01-20  Paolo Bacchilega  <paolo.bacch@tin.it>

	[ gthumb 2.0.0 released ]  

2003-01-20  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/gnome-canvas-thumb.c: 
	* libgthumb/gnome-canvas-thumb.h: 
	* libgthumb/image-list.c: 
	* libgthumb/image-list.h: use only the pixmap and remove the
	pixbuf field.

2003-01-19  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/catalog-png-exporter.c (catalog_png_exporter_interrupt) 
	(catalog_png_exporter_init, load_next_file): 
	* src/dlg-png-exporter.c (dlg_exporter): fix #103825 and #103826

	* src/gthumb-window.c (window_set_file_list_continue): update
	sensitivity after setting the file list (fix #103819).

2003-01-15  Paolo Bacchilega  <paolo.bacch@tin.it>

	* doc/C/ficures/*.png: updated images.
	
	* doc/C/gthumb.xml: updated manual.

2003-01-12  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-jpegtran.c (load_current_image): make rotation buttons
	not sensitive while loading the image.

	* src/commands-impl.c (edit_duplicate_file_command_impl):
	duplicate all images not only the first one.

	* libgthumb/gthumb-init.c (ensure_directories_exist): remove the
	old config file if present.

2003-01-09  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-file-utils.h: 
	* src/dlg-file-utils.c: when moving to trash overwrite without asking.

	* configure.in: require libexif >= 0.5.8

	* src/jpegutils/jpeg-marker.c: 
	* src/jpegutils/jpeg-marker.h: 
	* src/jpegutils/jpeg-data.c: 
	* src/jpegutils/jpeg-data.h: new files, used to save jpeg data.

	* src/dlg-jpegtran.c (swap_xy_exif_fields, swap_fields): update
	exif information after rotating an image.

2003-01-08  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-jpegtran.c (help_cb): add the help button.

	* doc/C/gthumb.xml: updated.

2003-01-06  Paolo Bacchilega  <paolo.bacch@tin.it>

	* gthumb.desktop.in: added StartupNotify, X-GNOME-Bugzilla-* and 
	X-GNOME-DocPath fields.

	* libgthumb/file-list.h: 
	* libgthumb/file-list.c (update_thumbnails_cb): interrupt
	thumbnails creation before starting it again.

2003-01-04  Paolo Bacchilega  <paolo.bacch@tin.it>

	[ gthumb 1.108 released ] 

2003-01-02  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/file-list.c (add_list_in_chunks): restore thumbnail
	creation when interrupted.

2003-01-01  Artis Trops  <hornet@navigator.lv>

	* configure.in: Added Latvian (lv) to ALL_LINGUAS.

2002-12-31  Abel Cheung  <maddog@linux.org.hk>

	* configure.in: Add da and zh_TW to ALL_LINGUAS

2002-12-31  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-image-prop.c (update_exif_data): display exif tags in a
	better order and avoid duplicates.

2002-12-26  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/file-data.c (file_data_update): 
	(file_data_new): update name and utf8_name fields correctly.

	* src/gthumb-ui.xml: s/Manual/Content/

2002-12-24  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-image-prop.c (update_general_info): fixed bug, patch
	from Jason Tackaberry <tack@auc.ca>

2002-12-23  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/fnmatch.[ch]: removed.

	* libgthumb/glib-utils.c: 
	* libgthumb/search.c: 
	* libgthumb/comments.c: 
	* libgthumb/catalog-png-exporter.c: 
	* libgthumb/file-list.c: 
	* libgthumb/file-data.c: 
	* libgthumb/gtk-utils.c: 
	* libgthumb/gthumb-text-item.c: 
	* libgthumb/image-list.c: 
	* libgthumb/print-callbacks.c (print_image_dlg): do not convert
	comments in locale format, handle them in utf8 format instead.

	* libgthumb/file-list.c: 
	(gth_file_list_update_next_thumb): update only visible thumbnails.
	
2002-12-22  Paolo Bacchilega  <paolo.bacch@tin.it>

	[ gthumb 1.107 released ]
	
2002-12-22  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/image-list.c (gil_relayout_images_at): use always the
	same function to compute the max height.

2002-12-20  Paolo Bacchilega  <paolo.bacch@tin.it>

	* README: updated.

	* libgthumb/image-loader.c: added some missing locks.

	* libgthumb/image-list.c (truncate_comment_if_needed): handle in a
	special way the	common case in which the comment is void.

2002-12-19  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-ui.xml: use a shorter label for the 'slide show'
	toolbar item.

2002-12-18  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/commands-impl.c (edit_delete_comment_command_impl): free
	allocated data.

2002-12-15  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-file-utils.c (folder_copy): do not check dest_dir when
	the operation is DELETE.

	* src/dir-list.c (dir_list_get_row_from_path): rename a variable
	to avoid ambiguity.

2002-12-13  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/commands-impl.c (help_about_command_impl): remove 'The'

	* src/dlg-image-prop.c (dlg_image_prop_new): use the 'unknown'
	pixbuf when the image cannot be loaded.

2002-12-12  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-image-prop.c (update_general_info): use a GtkImage widget
	instead of the ImageViewer widget.

	* src/gthumb-window.c (window_close): remove the monitor before
	closing the window.

2002-12-08  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-image-prop.c (dlg_image_prop_update, update_title):
	always update the title.

2002-12-07  Paolo Bacchilega  <paolo.bacch@tin.it>

	* components/image-viewer/GNOME_GThumb_Viewer.server.in.in: added
	x-tga to the supported mime type list.

	* libgthumb/dlg-save-image.c: 
	* libgthumb/dlg-save-image.h: moved from src to libgthumb 	

	* components/image-viewer/ui.c (verb_save_image): added 'Save
	Image' function.

2002-12-06  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-window.c: 
	* src/gthumb-window.h: 
	* src/commands-impl.c: 
	* src/dlg-posterize.c: 
	* src/dlg-brightness-contrast.c: 
	* src/dlg-color-balance.c: 
	* src/dlg-hue-saturation.c: 
	* libgthumb/async-pixbuf-ops.c: 
	* libgthumb/async-pixbuf-ops.h: 
	* libgthumb/gth-pixbuf-op.h: 
	* libgthumb/gth-pixbuf-op.c: make image operations asynchronous
	and cancellable (bug #99543).

2002-12-05  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/main.c (all_windows_update_browser_options): check
	PREF_SHOW_COMMENTS not PREF_SHOW_THUMBNAILS.

	* src/commands-impl.c (help_about_command_impl): make copyright 
	translatable.

2002-12-04  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-window.c (go_to_directory__step2): interrupt thumb
	list setting before changing directory.

	* libgthumb/gnome-canvas-thumb.c (RECALC_BOUNDS): 
	* libgthumb/image-list.c (IMAGE_LINE_HEIGHT, STRING_IS_VOID): make
	some functions 'inline' functions.

	* src/dlg-file-utils.c (copy_next_file): copy metadata correctly.

	* libgthumb/catalog-png-exporter.c (image_data_free): 
	* src/dir-list.c (dir_list_get_row_from_path): memory leaks fixed

2002-12-03  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/comments.c (comments_save_comment) 
	(comments_save_categories): 
	(comments_save_comment, comments_save_comment_non_null): fix
	memory leaks.

	* src/gth-folder-selection-dialog.c
	(gth_folder_selection_destroy): destroy recents data.

	* src/dlg-image-prop.c (dlg_image_prop_close): new function used
	to close the properties dialog.

	* libgthumb/image-loader.c (image_loader_stop): emit a signal only
	if there is an operation to stop.

	* src/gthumb-window.c (close__step5): NULL-ify
	window->image_prop_dlg and window->popup_menu after destroying them.

	* src/gthumb_search.glade: use sentence capitalization where 
	appropriate.

2002-12-02  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-comment: make "from exif data" option insensitive if no
	exif data is available.
	
	* src/gthumb_comments.glade: make the dialog bigger.

	* src/dlg-image-prop.c (dlg_image_prop_update): update a tab only
	when needed.

	* libgthumb/comments.c (comments_load_comment): check NULL pointer.

	* src/gthumb_comments.glade: 
	* src/dlg-comment.c: changed dialog layout.

2002-12-01  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gth-folder-selection-dialog.c (folder_sel__response_cb):
	move last folder to the top.

	* libgthumb/image-list.c (image_get_view_mode): check whether the
	string is NULL (attempt to fix #100031)

2002-11-29  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-search.c (cache_dir): ignore the .nautilus folder when 
	searching.

	* src/dlg-file-utils.c (copy_next_file, folder_copy): fix memleak.

2002-11-29  Paolo Bacchilega  <paolo.bacch@tin.it>
	
	[ gthumb 1.106 released ]

2002-11-28  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-window.c (key_press_cb): popup file context menu when
	the user press Shift-F10.

	* src/gtkorientationbox.c: remove useless variables.

	* src/jpegutils/transupp.c (SAVE_MARKERS_SUPPORTED): save markers.

	* src/gtkorientationbox.c: 
	* src/gtkorientationbox.h: 
	* src/gthumb-window.c (window_notify_update_toolbar_style): 
	* src/e-combo-button.c (e_combo_button_set_style): keep the
	combo button style in sync with the toolbar style.

2002-11-26  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-file-utils.c (copy_item__continue1): arifixed #99430
	(dlg_check_folder): fixed #99629

	* src/gth-folder-selection-dialog.c (list_view_activated_cb):
	fixed bug.

	* src/dlg-search.c (directory_load_cb, cache_dir): fix bug #99424

	* src/gthumb-window.c (viewer_drag_data_received): create a
	catalog when files are dropped into the viewer.

	* gthumb.spec.in : updated

	* src/gthumb-window.c (dir_list_button_press_cb) 
	(dir_list_button_release_cb, catalog_list_button_press_cb) 
	(catalog_list_button_release_cb): fix bug #99570

	* src/dlg-file-utils.c (folder_copy): fix bug #99577

2002-11-25  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gth-folder-selection-dialog.c: added a recent folders list. 

	* src/gthumb-window.c (dir_list_drag_data_received) 
	(dir_list_drag_motion, dir_list_drag_leave) 
	(location_entry_drag_data_received) 
	(catalog_list_drag_data_received, catalog_list_drag_motion) 
	(catalog_list_drag_leave, window_new): implements moving files and
	folder via drag & drop.

	* src/dlg-file-utils.h: 
	* src/dlg-file-utils.c (dlg_check_folder): new function to check
	folder existence and permissions.  If the folder does not exists
	the user is asked whether he wants to create it.

	* src/dlg-png-exporter.c (export): 
	* src/commands-impl.c (folder_copy__response_cb): 
	* src/dlg-file-utils.c (file_move_response_cb, file_copy_response_cb): 
	use the new function.

2002-11-24  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/gthumb-histogram.c (gthumb_histogram_calculate):
	reset values when the pixbuf is NULL.

	* src/gthumb-window.c (pref_click_policy_changed): 
	* src/catalog-list.c (catalog_list_update_underline): update the
	catalog list when the click policy changes.

	* libgthumb/catalog-png-exporter.c: 
	* libgthumb/catalog.c: 
	* src/dlg-catalog.c: 
	* src/commands-impl.c: 
	* src/gthumb-window.c: 
	* src/dlg-png-exporter.c: 
	* src/dlg-file-utils.c: 
	* src/gthumb-ui.xml: 
	* src/dlg-save-image.c: fixed bug #99427, #99430, #99431, #99433.
	
	* libgthumb/thumb-cache.c (nautilus_cache_remove_old_previews_async): 
	* libgthumb/comments.c (comments_remove_old_comments_async):
	fix dialog message (bug #99135).

	* src/dlg-file-utils.c (create_overwrite_dialog): added an
	option to specify a new name in the overwrite dialog.

2002-11-23  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-convert.c (save_image_and_remove_original): 
	* src/dlg-jpegtran.c (apply_tran): notify changes to all windows.

	* src/gthumb-window.c: 
	* src/commands-impl.c: 
	* src/dlg-file-utils.c: 
	* src/dlg-file-utils.h: implement "Move to Trash" files and
	folders, "Copy" and "Move" folders. Reimplement copying and moving
	of files using gnome-vfs.
	
2002-11-22  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/e-combo-button.c (paint): restore the old style.

	* src/gthumb-ui.xml:
	* src/gthumb-window.c (setup_toolbar_combo_button): use the combo
	button for the "Back" button, remove the "Edit image" combo
	button, add an "Image" menu and move the "Go" menu in the "View" menu.

	* libgthumb/gthumb-histogram.c: new file.
	* libgthumb/pixbuf-utils.c (_gdk_pixbuf_adjust_levels): 
	Added "equalize histogram" and "auto adjust levels" operations.
	
	Patch from Jason Tackaberry <tack@auc.ca>
	
2002-11-21  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-bookmarks.c (dlg_edit_bookmarks_update): fix bug #99121.

	* src/gthumb-window.c (image_requested_error_cb): set the viewer void
	is the image could not be loaded.

	* src/gth-folder-selection-dialog.c
	(gth_folder_selection_construct): let the folder entry activates 
	the default action.

	* src/*.glade: bug #99044 again.

	* src/main.c: 
	* src/main.h: 
	* src/commands-impl.c (file_exit_command_impl) 
	(folder_copy__response_cb): fix bug #99140
	* src/gthumb-window.c (close__step5): fix bug #99151.

2002-11-20  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-window.c (key_press_cb, viewer_key_press_cb): popup a
	context menu when the user press Shift-F10.

	* src/gthumb-ui.xml: add ellipses to "Rename"

	* src/gth-folder-selection-dialog.c (file_sel_ok_clicked_cb): do
	not convert the folder name to utf8.

	* src/gthumb-window.c (window_update_sensitivity): 
	* src/dlg-jpegtran.c (dlg_jpegtran): fix bug #98755

	* src/gth-folder-selection-dialog.c (gth_folder_selection_construct): 
	* src/*.glade: fix bug #99044.
	
	* src/gthumb-window.h:
	* src/dlg-bookmarks.c (dlg_edit_bookmarks): 
	* src/dlg-comment.c (dlg_edit_comment): 
	* src/dlg-categories.c (dlg_categories): fix bug #99045

	* src/dlg-open-with.c (open_with_cb) 
	(recent_list_selection_changed_cb, app_list_selection_changed_cb):
	fix bug #99032

	* src/gthumb-window.c (rename_subdir): fix bug #99037.

	* src/gthumb-ui.xml: add ellipses and underscores (bug #99041).

	* libgthumb/file-utils.c (escape_underscore): 
	* src/gthumb-window.c (add_bookmark_menu_item): fix bug #99042.

	* src/commands-impl.c (folder_move__response_cb): fix bug #99036.

	* src/gthumb-window.c (file_list_double_click_cb, window_new): 
	* libgthumb/image-list.c (selection_many_image_event): fix bug #99028.

2002-11-19  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-file-utils.c (dlg_folder_copy): new function.

	* src/commands-impl.c (folder_move__response_cb): use 
	dlg_folder_copy to move the folder if destination is not on the
	same file system.

	* src/gthumb-window.c: reorganized in order to avoid forward
	declarations.
	
	* src/gthumb-window.c (add_history_item): remove duplicated
	locations before adding a new one.

	* libgthumb/bookmarks.c (bookmarks_remove_all_instances): new function.
	* libgthumb/bookmarks.h: remove useless function
	bookmarks_add_with_prefix.

	* src/main.c (initialize_data): use absolute paths.

2002-11-18  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-search.c (search_images_async): fixed search_comments 
	condition.

	* libgthumb/gtk-utils.c (_gtk_message_dialog_new): 
	* src/gth-folder-selection-dialog.c (gth_folder_selection_construct): 
	* src/*.glade: make dialogs more HIG compliant.

2002-11-17  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/e-combo-button.c (paint): paint the combo button as a single
	button.

	* src/dlg-search.c (search_images_async): if the search criteria
	 include comment data just search in the comments tree.

	* libgthumb/bookmarks.c (bookmarks_add): added a parameter to choose
	whether	to append or to prepend an item to the bookmarks.  
	This is usefull because	bookmark items are appended while history 
	items are prepended.

	* src/commands-impl.c (edit_current_edit_comment_command_impl) 
	(edit_current_edit_categories_command_impl): new functions to edit
	current image comment and categories.

	* src/fullscreen.c (image_key_press_cb): 
	* src/gthumb-window.c: use the above functions.	
	
	* libgthumb/gthumb-stock.c: added the edit_image stock image.

	* src/gthumb-window.c (window_enable_thumbs): change
	View_Thumbnail command state if needed.
	(window_update_sensitivity) 
	(combo_button_activate_default_callback) 
	(setup_toolbar_combo_button, window_new): 
	* src/gthumb-ui.xml: add to the viewer toolbar a combo button with
	the editing commands.

	* src/e-combo-button.c: 
	* src/e-combo-button.h: the combo button implementation, taken
	from evolution.
	
	* src/gthumb-ui.xml: add the 'color balance' command to the 
	Edit->Image menu.

2002-11-16  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-window.c (stop__step2): set changing_directory to FALSE
	(stop__step3): set setting_file_list to FALSE

	* src/commands-impl.c (edit_delete_comment_command_impl): remove
	only the comment not the keywords.

	* src/gthumb-window.c (window_update_sensitivity): disable the
	slideshow if no image is present.

	* src/gthumb-ui.xml: make all labels translatable.

2002-11-15  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gth-folder-selection-dialog.c: 
	* src/gth-folder-selection-dialog.h: A folder selection widget.

	* src/commands-impl.c (folder_move_response_cb): 
	* src/commands-impl.c (folder_move): 
	* src/dlg-file-utils.c (file_move_response_cb, dlg_file_move) 
	(file_copy_response_cb, dlg_file_copy): Use the new widget.

	* libgthumb/file-list.c: 
	* src/dlg-scale-image.c: 
	* src/dlg-posterize.c: 
	* src/dlg-jpegtran.c: 
	* src/dlg-image-prop.c: 
	* src/dlg-hue-saturation.c: 
	* src/dlg-convert.c: 
	* src/dlg-color-balance.c: 
	* src/dlg-brightness-contrast.c: do not include 
	gnome-vfs-mime-sniff-buffer.h

2002-11-14  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/bookmark-list.c (bookmark_list_new): set rules hint to false. 

2002-11-14  Paolo Bacchilega  <paolo.bacch@tin.it>
	
	[ gthumb 1.105 released ]
	
2002-11-14  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/Makefile.am (DIST_SUBDIRS): add jpegutils to DIST_SUBDIRS
	
	* src/gthumb-window.c (pref_show_thumbnails_changed): use window
	not window->file_list.

2002-11-13  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-window.c (file_selection_changed_cb): update the
	statusbar after a timeout to reduce the number of updates.

	* components/image-viewer/GNOME_GThumb_Viewer.xml.in: 
	s/Black and White/Desaturate/

2002-11-12  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/fullscreen.c (fullscreen_stop): restore window position.

2002-11-10  Kjartan Maraas  <kmaraas@gnome.org>

	* configure.in (ALL_LINGUAS): Added "no".
	
2002-11-10  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-ui.xml: 
	* libgthumb/catalog.c (delete_catalog_dir): fixed some string typos.

2002-11-09  Hasbullah Bin Pit  <sebol@ikhlas.com>

        * configure.in: Added ms to ALL_LINGUAS.

2002-11-09  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/file-list.c (add_list_in_chunks) 
	(add_list__get_file_info_done_cb) 
	(set_list__get_file_info_done_cb): Add images in chunks to make
	the list more responsive.

	* src/gthumb-window.c (window_load_image): check whether 
	filename == window->image_path

2002-11-07  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/gthumb-init.c (gthumb_init): use functions to
	migrate to the new directories.
	(migrate_to_new_directories, migrate_file_from_to) 
	(migrate_dir_from_to): new functions

	* src/dlg-convert.c:
	* src/commands-impl.c:
	* src/gthumb-window.c: Fixed some unicode/i18n bugs.
	
	* src/dlg-save-image.c (dlg_save_image): use image filename as
	default value.

	* src/dlg-change-date.c: added "change date" tool.

2002-11-06  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb.schemas: use system style as default toolbar style.

	* src/gthumb-ui.xml: add labels to toolbar

	* libgthumb/gnome-canvas-thumb.c (gnome_canvas_thumb_draw): make
	thumbnails white, and paint the selection as a colored frame.

2002-11-05  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/main.c: Added SM support.

2002-11-05  Stanislav Brabec  <sbrabec@suse.cz>

	* configure.in: Added cs to ALL_LINGUAS.

2002-11-03  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-window.c (add_bookmark_menu_item): 
	* libgthumb/bookmarks.c: 
	* src/dlg-bookmarks.c: do not sort bokkmarks, let the user modify
	the bookmarks order instead.

	* libgthumb/bookmarks.c (get_menu_item_name): use relative path
	for folders under the home dir, full path for other folders and
	relative path for catalogs.

2002-10-31  Christian Neumair  <chris@gnome-de.org>

	* gthumb.desktop.in: Moved text from generic to name line so that gnome
	displays it in its menu.

2002-10-31  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/icons/Makefile.am (EXTRA_DIST): remove unknown.xpm

	* src/dlg-scale-image.c: implement unit change.
	(ok_cb): save options.

	* src/dlg-save-image.c (file_save_ok_cb): handle overwrite.

	* libgthumb/catalog.c (error_on_saving): s/file/catalog/g

	* src/gthumb-ui.xml: Fixed duplicated mnemonics again.
	Use 'delete' for files and 'remove' for comments and catalogs.

	* src/dlg-rename-series.c: 
	* src/dlg-convert.c: save options.

	* libgthumb/preferences.h: 
	* libgthumb/pixbuf-utils.c (_gdk_pixbuf_save_as_tiff): 
	* src/dlg-save-image.c (dlg_save_options): added resolution option
	to the tiff saver.
	(dlg_save_options): save options.

	* configure.in: set GETTEXT_PACKAGE to gthumb

2002-10-30  Christian Neumair  <chris@gnome-de.org>

	* src/gthumb-ui.xml: Fixed some duplicate mnemotics.

2002-10-29  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-ui.xml: make dialogs more HIG compliant.

	* src/gthumb-window.c (window_notify_catalog_new): 
	* src/main.c (all_windows_notify_catalog_new): 
	* src/commands-impl.c (edit_current_catalog_new_command_impl):
	added 'New Catalog' command.
	
	* libgthumb/pixbuf-utils.c: added copyright notes.

2002-10-28  Paolo Bacchilega  <paolo.bacch@tin.it>

	* added a simple image editor.

2002-10-12  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-window.c (hide_sidebar_idle, file_button_press_cb):
	make double-clicking on a thumbnail hide the sidebar. Use a
	timeout to avoid that the viewer gets the button press event.

	* src/dlg-image-prop.c (dlg_image_prop_new): 
	* src/gthumb.glade: define the image properties window as a window
	not as a dialog.

	* libgthumb/preferences.h:
	* libgthumb/file-list.c (file_list_update_thumbs): 
	* libgthumb/thumb-loader.c (thumb_loader_init): add a gconf key
	for the max file size over which thumbnails are not generated.
	
	* libgthumb/thumb-loader.c (thumb_loader_start): emit DONE instead
	of ERROR when the file size exceeds the limit.

2002-10-09  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-catalog.c (dlg_move_to_catalog_directory) 
	(dlg_add_to_catalog): center dialog on parent.

	* src/dlg-image-prop.c: 
	* src/gthumb.glade: make the properties dialog navigable with the 
	keyword.

2002-10-08  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/commands-impl.c (folder_rename): remove the VFS monitor before
	renaming a folder.

2002-10-07  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-ui.xml: add stock icon to the Go_Stop command.

	* src/gthumb-window.c (stop__step5, window_update_sensitivity):
	update the Go_Stop command sensitivity when appropriate.
	

	* src/gthumb-window.c (item_toggled_handler, window_new) 
	* src/gthumb-window.h: add notifications for
	PREF_UI_TOOLBAR_VISIBLE and PREF_UI_STATUSBAR_VISIBLE preferences.

2002-10-06  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/catalog-png-exporter.c (paint_frame): remove special dirs
	from the destination directory before getting the relative path.

2002-10-05  Paolo Bacchilega  <paolo.bacch@tin.it>

	* Ported to gconf.

2002-10-01  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/jpegutils/*: New files. Implement an internal jpegtran if
	we have libjpeg.
	
	* src/dlg-jpegtran.c (apply_tran): use the internal jpegtran if
	available.

2002-10-01  Paolo Bacchilega  <paolo.bacch@tin.it>
	
	[ gthumb 1.104 released ]

2002-09-29  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-jpegtran.c (apply_tran): escape image path.

	* src/gthumb-ui.xml: use a different popup menu when in fullscreen 
	mode.

	* libgthumb/gthumb-slide.c (draw_shadow): make the shadow shaded.

2002-09-23  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/image-loader.c (load_image_thread): Use a single
	thread for loading images instead of creating a thread each time
	an image must be loaded.

2002-09-20  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/commands-impl.c: Added "duplicate image" operation.

2002-09-17  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/image-loader.c: Use a thread to load images with the
	gdk_pixbuf_animation_new_from_file function, this let us getting
	rid of the gdk_pixbuf_loader which is slower and buggy.

2002-09-16  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/md5.c: 
	* libgthumb/md5.h: new files, taken from textutils.

	* src/dlg-duplicates.c: do not use the md5sum external command,
	use the internal implementation instead.

2002-09-14  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/catalog-png-exporter.c (load_next_file): 
	* src/dlg-png-exporter.c (export_info): display some usefull info 
	while making the index.

2002-09-13  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-comment.c (date_exif_clicked_cb): added ability to
	import the date from the EXIF data.

	* src/dlg-duplicates.c (find_checksum_command): check whether the
	user have sha1sum or md5sum.

2002-09-12  Paolo Bacchilega  <paolo.bacch@tin.it>

	* components/catalog-view/*: catalog viewer.
	
	* src/dlg-duplicates.c: 
	* src/dlg-duplicates.h: implements the "find duplicates" tool.

2002-09-11  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-image-prop.c (dlg_image_prop_new): always define
	scrolled_window and i_notebook.

2002-08-31  Paolo Bacchilega  <paolo.bacch@tin.it>

	* components/image-viewer/viewer-nautilus-view.c (viewer_nautilus_view_load_location): unescape the location before asking the Stream.

2002-08-30  Paolo Bacchilega  <paolo.bacch@tin.it>

	* components/image-viewer/viewer-control.c: 
	* components/image-viewer/viewer-control.h: 
	* components/image-viewer/viewer-nautilus-view.c: 
	* components/image-viewer/viewer-nautilus-view.h: 
	* components/image-viewer/ui.c:	Added "Print" command to the control.

	* libgthumb/print-callbacks.c: 
	* libgthumb/print-callbacks.h: moved here so the control can use it.

	* src/fullscreen.c (fullscreen_new): Use the old way of doing 
	fullscreens if the WM do not support WM_STATE_FULLSCREEN, and if this
	is the case disable the ability of deleting images and editing 
	comments.

2002-08-29  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-window.c (window_update_infobar): remove useless tooltip.

	* libgthumb/image-viewer.c (image_viewer_size_allocate): skip 
	size_changed signal emition when changing frame.

	* src/dlg-comment.c (ok_clicked_cb): store even hour:min:sec

	* src/fullscreen.c (get_file_info): add misc file information.
	(show_comment_on_image): improve comment layout.

	* libgthumb/gthumb-canvas-text.c: 
	* libgthumb/gthumb-canvas-text.h: 
	* src/print-callbacks.c: 
	* src/gthumb_print.glade2: Optionally print the comment.

2002-08-26  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/image-list.c: 
	* libgthumb/image-viewer.c: s/uint/guint/g

	* src/commands-impl.c (view_image_prop_command_impl): 
	* src/commands-impl.h: 
	* src/gthumb-window.c (image_loaded_cb): 
	* src/gthumb-window.h: 
	* src/dlg-image-prop.c: Image properties dialog.  Display image
	properties and EXIF data.

2002-08-23  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/preferences.c (preferences_load): changed default 
	transparency type to TRANSP_TYPE_NONE.

	* src/gthumb-window.c (window_sync_menu_with_preferences): new 
	function.

	* src/main.c (all_windows_update_viewer_options): sync menu with
	preferences.

	* src/gthumb-window.c (window_update_title): make the title HIG
	compliant.

2002-08-17  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/fullscreen.c (fullscreen_start): hide the main window.
	(fullscreen_stop): show the main window.

2002-08-10  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/fnmatch.c: 
	* src/fnmatch.h: 
	* src/dlg-search.c:
	* configure.in: 
	* acinclude.m4:
	* Makefile.am : Cope with systems that do not have FNM_CASEFOLD 
	defined.

	* src/dir-list.c (dir_list_interrupt_change_to): 
	* libgthumb/file-utils.c (path_list_async_interrupt): Added a DoneFunc
	argument.
	* src/gthumb-window.c: Use the new argument.

2002-08-05  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/catalog-list.c (catalog_list_refresh): 
	* src/dir-list.c (dir_list_refresh_continue): Use an upward arrow for
	the ".." entry.

	* src/dir-list.c (add_columns): 
	* src/gthumb-window.c (dir_button_press_cb): 
	(catalog_button_press_cb): 
	* libgthumb/preferences.c (preferences_init): Follow the same button
	click policy of Nautilus.

2002-07-31  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-window.c (make_url_list): prepend "file://" for the 
	uri-list target.

2002-07-27  Paolo Bacchilega  <paolo.bacch@tin.it>

	* components/image-viewer/Makefile.am (libexec_PROGRAMS): install
	in libexec.

2002-07-26  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-jpegtran.c: 
	* src/dlg-jpegtran.h: JPEG lossless transformations tool.

2002-07-23  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/fullscreen.c (show_comment_on_image): Show even the filename.

	* libgthumb/file-list.c (file_list_update_thumb): 
	* src/gthumb-window.c (directory_changed): 
	(_window_sync_changes): New functions.
	(set_dir_list_continue): Add a monitor on the directory.

2002-07-19  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-window.c (window_new): 
	(window_notify_update_layout): Changed layout number four.

2002-07-18  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-preloader.c: rename gthumb_preloader_set_paths to
	gthumb_preloader_start and remove the old gthumb_preloader_start. This
	fix a bug when interrupting the loader.

2002-07-17  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/fullscreen.c (show_comment_on_image): New function.
	(image_key_press_cb): Use it when the user press 'c'.

	* configure.in (RENDER_LIBS): Checks for Xft/XRender

2002-07-14  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/commands-impl.c (file_new_window_command_impl): Open the new
	window in the same location of the old window.

2002-07-12  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-open-with.c (open_cb): re-display the dialog if an error
	occurred.

2002-07-11  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-open-with.c (exec_command): Use g_spawn instead of 
	gnome_exec, and display an error message if needed.

	* src/dlg-maintenance.c: 
	* src/dlg-maintenance.h: New files.  Put all maintenance functions in
	a dialog.

	* src/gtkcellrendererthreestates.h: 
	* src/gtkcellrendererthreestates.c: 
	* src/dlg-comment.c: 
	* src/dlg-categories.c: Comments and categories have separate dialogs
	now.  Better handling of categories when many images have been
	selected.
	
2002-07-10  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-comment.c (ok_clicked_cb): Delete empty comments.

2002-07-09  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb_comments.glade2: added "save only changed fields" option.
	
	* src/dlg-comment.c (ok_clicked_cb): Implement the "save only changed
	fields" option.

	* libgthumb/comments.c (comments_get_comment_as_string): changed 
	comment layout.
	(comments_save_comment_non_null): New function save only non-empty 
	fields.

2002-07-08  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/image-list.c (image_list_remove): Do not update the width
	after deleting images.

	* src/commands-impl.c (view_zoom_fit_command_impl):
	* src/gthumb-ui.xml: make zoom_fit a stateless command.

2002-07-07  Paolo Bacchilega  <paolo.bacch@tin.it>

	* README: Updated to GNOME 2.
	* configure.in: Updated required lib versions.

2002-07-05  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/image-viewer.c (image_viewer_button_release): Do not emit
	the click signal if the viewer was not focused before the button press
	event.

	* libgthumb/file-list.c (file_list_select_image_by_pos): 
	* libgthumb/image-list.c (image_list_image_is_visible): 
	* libgthumb/image-list.h: Define a more fine grained visibility type.

	* libgthumb/bookmarks.c (bookmarks_remove_from): 
	(bookmarks_remove): remove the path from the hash tables only when 
	it is no more present in the list.

	* src/gthumb-window.c (notify_files_deleted): freeze the list before
	deleting.

	* configure.in: Add AC_PREREQ(2.52)

2002-06-30  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/commands-impl.c (folder_rename): check whether new_path and 
	old_path are the same.
	(edit_folder_move_command_impl): 
	(edit_current_folder_move_command_impl): 
	(folder_move): 
	(folder_move__destroy_cb): Implement the "Move Folder" command.

2002-06-29  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/main.c (create_default_categories_if_needed): Add default 
	categories.

2002-06-28  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-window.c (image_clicked_cb): New function : show next
	image when left click on an image.

2002-06-27  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/thumb-cache.c (cache_copy): 
	(cache_move): Set the mtime of the new thumbnail to the mtime of the
	destination.

	* src/gthumb_png_exporter.glade2:
	* libgthumb/catalog-png-exporter.c (get_footer_text): 
	(get_header_text): 
	(get_hf_text): 
	(export): 
	(paint_footer): Use %p to insert page number and %n to insert the 
	total number of pages.

2002-06-24  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-window.c (window_new): use gtk_paned_pack insted of 
	gtk_paned_add, and set a size request for the image viewer and image 
	list.

	* src/main.c (all_windows_notify_files_rename): 
	* src/dlg-rename-series.c: 
	* src/dlg-file-utils.c (dlg_file_rename_series): Implements rename 
	series.

	* libgthumb/gthumb-slide.c (gthumb_draw_image_shadow_out): 
	(gthumb_draw_image_shadow_in): Implements SHADOWN_IN and SHADOW_OUT 
	styles.

	* libgthumb/glib-utils.c (_g_substitute): new function.

	* libgthumb/catalog-png-exporter.c (catalog_png_exporter_set_header): 
	(catalog_png_exporter_set_footer): allow NULL values.
	(paint_frame): added SHADOW_IN and SHADOW_OUT styles.

	* gthumb.desktop.in: make entries specification compliant.

2002-06-20  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-ui.xml
	* libgthumb/catalog-png-exporter.c: 
	* libgthumb/catalog-png-exporter.h: 
	* src/dlg-png-exporter.h:
	* src/dlg-png-exporter.c: Implemented header and footer support. 

2002-06-18  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-preferences.c: add the toolbar style option.

	* src/gthumb-window.c (window_notify_update_toolbar_style): New 
	function, update toolbar style according to preferences.

2002-06-16  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-search.c: Remove MAX_CATEGORIES.

	* doc/C/gthumb.xml: Sync manual with UI changes.  Added the preferences
	dialog documentation.

	* src/dlg-preferences.c (dlg_preferences): Add the help button.

2002-06-15  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/gtk-utils.c (_gtk_error_dialog_run): 
	(_gtk_info_dialog_run): Set the parent window.

	* src/gthumb-window.c (view_image_at_pos): reload the image if the
	mtime changed.

	* src/dlg-png-exporter.c: Use the new name template functions.

	* src/commands-impl.c (alter_image_rotate_command_impl): Set mtime to 0
	after altering an image so when clicking on the thumbnail the image
	get reloaded.

	* src/auto-completion.c (auto_compl_show_alternatives): Use the library
	icon if we are navigating the catalogs.

	* libgthumb/pixbf-utils.c: remove pixbuf_to_file_as_png, use 
	gdk_pixbuf_save instead.
	
	* libgthumb/nav-window.c (NAV_WIN_MAX_WIDTH): change the max window
	size from 128 to 112.

	* libgthumb/gthumb-slide.c (gthumb_draw_frame_shadow): 
	(gthumb_draw_image_shadow): New functions.

	* libgthumb/glib-utils.c (_g_get_template_from_text): New function.
	(_g_get_name_from_template): New function.

	* libgthumb/file-utils.c (get_path_relative_to_dir): New function.
	(remove_special_dirs_from_path): New Function.

	* libgthumb/catalog-png-exporter.h: Added new frame style :
	FRAME_STYLE_SIMPLE_WITH_SHADOW.

	* libgthumb/catalog-png-exporter.c (paint_comment): New function to
	paint comments with italic font.
	(catalog_png_exporter_set_name_template): New function.
	(catalog_png_exporter_set_start_at): New function.
	(catalog_png_exporter_set_header): 
	(catalog_png_exporter_set_header_font): 
	(catalog_png_exporter_set_header_color): 
	(catalog_png_exporter_set_footer): 
	(catalog_png_exporter_set_footer_font): 
	(catalog_png_exporter_set_footer_color): New functions, not implemented
	yet.
	(export): Do not try to paint an image when the pixbuf is NULL.
	(begin_page): Use _g_get_name_from_template to get filename.

	* configure.in: remove the libpng check we use gdk_pixbuf_save to save
	png images now.

2002-06-03  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/gthumb-slide.h: 
	* libgthumb/gthumb-slide.c: New file. 

	* libgthumb/catalog-png-exporter.c (get_relative_path): New function.
	(paint_frame): use get_relative_path to set the image path in the HTML
	area.

	* src/dlg-png-exporter.c (export): If the destination directory does
	not exist ask the user whether to create it.

	* libgthumb/gtk-utils.c (_gtk_info_dialog_run): New function.

	* src/dlg-search.c (update_list_from_entry): New function to set the
	category list from the content of the category entry.
	(choose_categories_cb): 
	(dlg_search_ui): Use update_list_from_entry.

	* libgthumb/preferences.c (preferences_load): Set 
	ZOOM_CHANGE_FIT_IF_LARGER as the default zoom change.

2002-06-02  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/commands-impl.c (rename_file): Do not rename a file if source and
	destination are the same.
	(help_about_command_impl): Do not allow more than one about dialog.

	* libgthumb/gtk-utils.c (_gtk_yesno_dialog_new): New function.

	* src/dlg-file-utils.c (dlg_file_delete): 
	* src/commands-impl.c (rename_file): 
	(edit_remove_from_catalog_command_impl): 
	(folder_delete): 
	(catalog_delete): Use _gtk_yesno_dialog_new when appropriate.

2002-06-01  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/preferences.c: 
	* src/gthumb-window.c: Save and restore toolbar and statusbar 
	visibility.

2002-05-30  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb_search.glade2:
	* src/dlg-search.c: Added "Choose Categories" dialog.

	* libgthumb/preferences.c (preferences_load): Set go_to_last_localtion
	the default behaviour.

	* src/gthumb-preloader.c (gthumb_preloader_set_paths): Use MAX priority
	for the requested image, DEFAULT priority for other images.

	* libgthumb/image-loader.c (image_loader_set_priority): New function.

	* src/gthumb-preloader.c: 
	* src/gthumb-windowr.c: Load even current image with the preloader,
	this let us avoid a redundant loading that occured with the previous 
	implementation.

	* libgthumb/gthumb-text-item.c (gthumb_text_item_destroy): 
	* src/gthumb-window.c (window_update_statusbar_list_info): plug a few
	memleaks. 

2002-05-29  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-ui.xml: Added the entry : View->Black and White.
	
	* libgthumb/image-viewer.c (image_viewer_alter): ALTER_GRAY added.
	
	* libgthumb/pixbuf-utils.c (pixbuf_copy_gray): The function that
	implements the desaturation.

	* libgthumb/image-loader.c (image_loader_load_from_image_loader): 
	* libgthumb/image-viewer.c (image_viewer_load_from_image_loader): New
	functions used by the preloader.

	* src/gthumb-window.c: Use the preloader.

	* src/gthumb-preloader.c: 
	* src/gthumb-preloader.h: Added an image preloader.
	

2002-05-28  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/thumb-cache.c (cache_move): 
	(cache_copy): overwrite destination.

	* libgthumb/comments.c (comment_copy): 
	(comment_move): overwrite destination.

	* src/dlg-file-utils.c (dlg_show_error): translate message to utf8.

2002-05-27  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-preferences.c: 
	* libgthumb/preferences.h: Added "fast file type" option. 

	* libgthumb/image-viewer.c (image_viewer_style_set): Added 
	TRANSP_TYPE_NONE which uses the gtk theme color to paint transparency.

	* src/gthumb-window.c: Added EditCurrentDir_* and EditCurrentCatalog_*
	commands.  These are the commands displayed in the main menu
	and work a bit different from the commands in the context menus.
	Added Image_* commands displayed in the viewer context menu.
	Display image name in the "Info Bar" and other information in the
	status bar.  Activate progress bar when loading an image.
	Fixed double-click in the file list.  Use Page Down/Up to view the
	next/prev image when the viewer is focused.  Focus the image when
	click on the Info Bar.  Removed custom icons for zoom buttons, use gtk
	stock icons instead.  Stopping the slideshow exit from fullscreen mode.
	Minor usability enhancements.

	* src/gthumb-window.c (window_notify_directory_rename): 
	(window_notify_directory_delete): 
	(window_notify_directory_new): 
	(window_notify_catalog_rename): 
	(window_notify_catalog_delete): new functions.

	* src/dlg-comment.c (update_category_entry): use categories 
	instead of keywords.  Added a category list. 

	* src/dlg-search.c: removed the gthumb_search_edit.glade2 file, the
	progress dialog for "Edit search" is is gthumb_search.glade2 now. 

	* src/gthumb-ui.xml: changed arrangement of menus.

2002-05-11  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/gthumb-window.c (window_show_image_pane): 
	(window_hide_image_pane): new functions.

	* libgthumb/preferences.c (preferences_set_default_values): changed
	some default values.

	* libgthumb/gthumb-text-item.c (gthumb_text_item_draw): use paint_focus
	instead of draw_focus.

	* libgthumb/gthumb-info-bar.c: removed useless variables.
	(gthumb_info_bar_set_text): show a tootip when the labelis not full 
	visible.

	* configure.in (GETTEXT_PACKAGE): changed GETTEXT_PACKAGE to gthumb-2.0

	* Makefile.am: added doc and omf-install directories.

2002-05-05  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/main.c (get_icon_path_from_name): Add .nautilus/themes to the
	search path.

	* src/gthumb-ui.xml: Removed ellipsis where not needed.

	* components/image-viewer/GNOME_GThumb_Viewer.xml.in: Add a toolbar
	with the rotate, flip and mirror commands.

2002-05-01  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/catalog-png-exporter.c: 
	* src/dlg-png-exporter.c: Added the image preview.

2002-04-30  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/commands-impl.c (edit_folder_delete_command_impl): update cache
	when deleting a folder.
	(edit_folder_open_command_impl): Added "open with Naulitus" command, 
	deleted "Move folder" command.

	* libgthumb/comments.c (comments_remove_old_comments_async): 
	* libgthumb/thumb-cache.c (cache_remove_old_previews_async): Show a 
	dialog while deleting old thumbnails and old comments.

	* src/commands-impl.c (edit_folder_rename_command_impl): Update cache 
	when renaming a folder.

2002-04-27  Paolo Bacchilega  <paolo.bacch@tin.it>

	* all files: Removed deprecated functions.

2002-04-25  Paolo Bacchilega  <paolo.bacch@tin.it>

	* libgthumb/image-viewer.c (image_viewer_expose): Draw the frame in 
	black color when the black background is on.  Fixed animation start up
	when using zoom changes different from "Keep previous zoom".

	* src/main.[ch]:
	* src/gthumb-window.c: 
	* src/icons/*.png: Use the nautilus folder icon for folders. Changed 
	some toolbar icons. 

	* libgthumb/gtk-utils.c (_gtk_image_new_from_inline): New function.
	
	* libgthumb/file-utils.c (file_extension_is): New function.

2002-04-24  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/commands-impl.c (edit_folder_rename_command_impl): Implemented.
	(edit_folder_delete_command_impl): Implemented.

	* libgthumb/gtk-utils.c (_gtk_error_dialog_run): New function.
	(_gtk_error_dialog_from_gerror_run): New function.

	* src/commands-impl.c: Use above functions to show error dialogs.

2002-04-23  Paolo Bacchilega  <paolo.bacch@tin.it>

	*libgthumb/gthumb-error.[ch]: new file.
	
	* libgthumb/catalog.c: 
	* libgthumb/catalog.h: Added GError argument to some functions.

	* src/commands-impl.c:  
	* src/dlg-preferences.c:  
	* libgthumb/preferences.[hc]: Removed redundant options. 

2002-04-22  Paolo Bacchilega  <paolo.bacch@tin.it>

	* src/dlg-open-with.c (delete_recent_cb): Compare the strings not the 
	pointers.

	* Imported all files.

